<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Earthworm System: pkfilter commands</title>
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(250, 223, 175);"
 alink="#ff0000" link="#0000ee" vlink="#551a8b">
<center>
<h1> <br>
pkfilter Configuration File</h1>
<i>(last revised May 25, 2006)</i> </center>
<p>pkfilter is a pick filtering module designed to prevent duplicate
picks. Below is a copy of the .d file with detailed notes on each
parameter
</p>
<pre># pkfilter configuration file<br><br># Basic Earthworm setup:<br>#------------------------<br> MyModuleId   MOD_PKFILTER    # module id for this instance of pkfilter <br> InRing       PICK_RING       # shared memory ring for input<br> OutRing      FILTERPICK_RING # shared memory ring for output<br> HeartbeatInt 30              # seconds between heartbeats<br> LogFile      1               # 0 log to stderr/stdout only <br>                              # 1 log to stderr/stdout and to disk file<br>                              # 2 log to disk file only<br> Debug        1<br><br># List the message logos to grab from InRing, WILDCARDs permitted.<br># Multiple "GetLogo" commands are allowed, with no hardcoded limit.<br>#         Installation    Module      Message Types<br>#-----------------------------------------------------------------<br> GetLogo  INST_WILDCARD  MOD_WILDCARD # TYPE_PICK_SCNL &amp; TYPE_CODA_SCNL<br>                                      # TYPE_PICK2K &amp; TYPE_CODA2K<br><br># Pick Filtering Parameters<br>#--------------------------<br> PickHistory          5      # Keep track of this many picks which have<br>                             # made it thru the filter for each station.<br><br> PickTolerance        3.0    # If pick times are within this many seconds of<br>                             # each other, they are "duplicates."<br><br> OlderPickAllowed     1      # 0=reject any non-duplicate pick whose <br>                             #   timestamp is earlier than the youngest <br>                             #   passed pick for this station.<br>                             # 1=accept a non-duplicate pick whose timestamp<br>                             #   is earlier than the youngest passed pick,<br>                             #   but place a limit on how old it can be.<br>                             #   Must also use the "OlderPickLimit" command.<br>                             # 2=accept any non-duplicate pick whose <br>                             #   timestamp is earlier than the youngest   <br>                             #   passed pick.<br><br> OlderPickLimit       30     # Required only if OlderPickAllowed = 1<br>                             # Accept an pick whose timestamp is between<br>                             # PickTolerance and OlderPickLimit sec     <br>                             # earlier than the youngest passed pick<br>                             # from this station.<br><br> DuplicateOnQuality   1      # If non-zero, transfer a duplicate when its<br>                             #  quality is better than the original.<br><br> QualDiffAllowed      1      # Required quality difference for later pick to<br>                             # be allowed to pass as a duplicate.<br>                             #  0 means any pick greater than current pick<br>                             #  1 means a pick of 1 replaces a pick of 3 <br>                             #  2 means a pick of 0 replaces a pick of 3 <br>                             #  3 is invalid because it is equivalent to <br>                             #    turning off the duplicate on quality test <br><br># List of Allowed Components<br>#---------------------------<br># If you want ALL component codes to be eligible to pass thru <br># pkfilter, comment out all "AllowComponent" commands.<br># If you want to limit which component codes pass thru pkfilter,<br># use one "AllowComponent" command for each allowed component code.<br># A component refers to the CHANNEL name in the SCNL tuple.<br> AllowComponent   VDZ<br> AllowComponent   VHZ<br> AllowComponent   VLZ<br> AllowComponent   SHZ<br> AllowComponent   SLZ<br> AllowComponent   EHZ<br> AllowComponent   HHZ<br> AllowComponent   BHZ<br> AllowComponent   DP1<br> AllowComponent   DP2<br> AllowComponent   DP3<br> AllowComponent   EP1<br> AllowComponent   EP2<br> AllowComponent   EP3<br><br># Coda Filtering Parameters<br>#--------------------------<br> CodaFilter       1          # Possible coda filtering values:<br>                             #  0 = allow no codas thru filter<br>                             #  1 = allow only codas which match passed<br>                             #      picks to pass thru filter <br>                             #  2 = allow all codas thru<br><br># Optional commands:<br>#-------------------<br> MaxMessageSize   128        # length (bytes) of largest msg to be processed<br>                             # from InRing.  Default=MAX_BYTES_PER_EQ<br><br> UseOriginalLogo  1          # 0  apply pkfilter's logo to any messages that<br>                             #    pass the filter test (normal Earthworm behavior)<br>                             # non-zero means apply the original logo to any<br>                             #    messages that pass the filter test.  This<br>                             #    also requires that InRing and OutRing be <br>                             #    different to avoid "missed message" or<br>                             #    "sequence gap" storms in pick-reading modules.<br></pre>
<center> <a href="../modules.html">Module Index</a> | <a
 href="../ovr/pkfilter_ovr.html">pkfilter Overview</a> </center>
<hr>
<address> <br>
Contact: <address> Questions? Issues? <a href="http://groups.google.com/group/earthworm_forum?hl=en" target="_blank">Subscribe to the Earthworm Google Groups List. </a></address> </address>
</body>
</html>
