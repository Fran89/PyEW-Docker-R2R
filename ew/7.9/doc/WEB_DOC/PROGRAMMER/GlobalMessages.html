<HTML>

<HEAD>
<TITLE>Earthworm Global Processing Message Formats</TITLE>
</HEAD>

<BODY aLink=#ff0000 bgColor=#fac0a2 link=#0000ee text=#000000 vLink=#551a8b>

<H1 align=center></A>
<B>
   <FONT color=#ff0000 size=+4>
      Earthworm Global Processing<br>Message Formats
   </FONT>
</B>
</H1>

<HR width="100%">

<H5 align=right><TT>July 24, 2002</TT></H5>
<H5 align=right><TT>Alex Bittenbiter and Dale Hanych</TT></H5>

<PRE>
GENERAL:

This document describes messages pertaining to global processing:

1.    TYPE_AMP_GLOBAL
2.    TYPE_PICK_GLOBAL
3.    TYPE_LOC_GLOBAL


All fields will be blank-separated.

All fields will have at least one printing (non-whitespace) character



TYPE_PICK_GLOBAL
=================

&lt;author&gt; &lt;sequence_number&gt; &lt;version&gt; &lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; &lt;pick_time&gt; &lt;phase_name&gt;

Inalterable Header:
------------------

&lt;author&gt; -- The standard author string

&lt;sequence_number&gt; -- integer, represented as an ascii string
                     The sequence number should be practically unique,
                     such that it will not wrap or be duplicated during a reasonable period of time --
                     i.e. expected lifetime of the developers involved. 

&lt;version&gt; -- a number indicating the format version.

Version 1 content:
-----------------

&lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; -- standard station-channel-network-location as ascii strings

&lt;phase_name&gt; -- character string

&lt;pick_time&gt; -- yyyymmddhhmmss.sss



TYPE_AMP_GLOBAL
===============

&lt;author&gt; &lt;sequence_number&gt; &lt;version&gt; &lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; &lt;pick_time&gt; &lt;magnitude_type&gt; &lt;amplitude&gt; &lt;associated_period&gt;

Inalterable Header:
------------------

&lt;author&gt; -- The standard author string

&lt;sequence number&gt; -- integer, represented as an ascii string
                     The sequence number should be practically unique,
                     such that it will not wrap or be duplicated during a reasonable period of time --
                     i.e. expected lifetime of the developers involved. 

&lt;version&gt; -- a number indicating the format version.

Version 1 content:
-----------------

&lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; -- standard station-channel-network-location as ascii strings

&lt;pick_time&gt; -- yyyymmddhhmmss.sss

&lt;magnitude_type&gt; -- ascii numeric code: 1 = mb, 2 = ml, 3 = mblg, 4 = ms; more as needed

&lt;amplitude&gt; -- a/d counts, floating point ascii

&lt;associated_period&gt; -- seconds,  floating point ascii



TYPE_LOC_GLOBAL:
===============

This message shall consist of one or more 'lines'. 
Each line will start with a 'line name' string followed by an ascii space. 
Each line terminates with a ascii newline character ['\n']
Each line will consist of blank-separated fields.
Additional fields can be added to the end of each line as the message evolves.
The message terminates with an additional \n  [message ends in two \n]
The first line of the message must be a SUM line.  There shall be only one SUM line per message.
Following the SUM line, data lines can appear in any order.
The SUM line will be versioned 
For version 1, data line types are PHS and MAG, other line types will be created as needed.


SUM &lt;author&gt; &lt;version&gt; &lt;id&gt; &lt;origin_time&gt; &lt;lat&gt; &lt;lon&gt; &lt;z&gt; &lt;gap&gt; &lt;dmin&gt; &lt;rms&gt; &lt;pick_count&gt; &lt;nphs&gt; &lt;nmag&gt;

PHS &lt;author&gt; &lt;sequence_number&gt; &lt;version&gt; &lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; &lt;pick_time&gt; &lt;phase_name&gt;

MAG &lt;author&gt; &lt;sequence_number&gt; &lt;version&gt; &lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; &lt;pick_time&gt; &lt;mag_type&gt; &lt;amp&gt; &lt;period&gt;


Where:

&lt;version&gt; -- a number indicating the message version
             (pertains to SUM line and possibly content)

&lt;id&gt; -- event id

&lt;origin_time&gt;, &lt;pick_time&gt; -- ascii strings in format YYYYMMDDhhmmss.sss

&lt;pick_count&gt; -- number of picks used to calculate origin (e.g., by glass)

&lt;nph&gt; -- number of PHS lines included

&lt;nmag&gt; -- number of AMP lines included

&lt;mag_type&gt; -- ascii numeric code: 1 = mb, 2 = ml, 3 = mblg, 4 = ms; more as needed

&lt;station&gt; &lt;chan&gt; &lt;net&gt; &lt;loc&gt; -- standard SCN-L

</PRE>
</BODY>
</HTML>