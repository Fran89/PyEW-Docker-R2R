<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>global_amp_rw.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>global_amp_rw.h</h1><a href="global__amp__rw_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef _GLOBAL_AMP_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _GLOBAL_AMP_H</span>
00003 <span class="preprocessor"></span><span class="comment">/*---------------------------------------------------------------------------*/</span>
00004 
00005 
00006 <span class="preprocessor">#include &lt;<a class="code" href="trace__buf_8h.html">trace_buf.h</a>&gt;</span>      <span class="comment">/*  TRACE_STA_LEN, TRACE_CHAN_LEN, TRACE_NET_LEN, TRACE_LOC_LEN */</span>
00007 <span class="preprocessor">#include &lt;<a class="code" href="earthworm__defs_8h.html">earthworm_defs.h</a>&gt;</span> <span class="comment">/* for amp types */</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="global__msg_8h.html">global_msg.h</a>&gt;</span>     <span class="comment">/* for return codes */</span>
00009 
00010 
00011 <span class="comment">/*---------------------------------------------------------------------------*/</span>
00012 
00013 
00014 <span class="comment">/* ==========================================================================</span>
00015 <span class="comment">**                    SIZE DEFINES AND LIMITS</span>
00016 <span class="comment">** ========================================================================= */</span>
00017 
00018 <span class="comment">/* Global Amp 01</span>
00019 <span class="comment">**</span>
00020 <span class="comment">** &lt;author&gt; &lt;sequence_number&gt; &lt;version&gt; &lt;station&gt; &lt;comp&gt; &lt;net&gt; &lt;loc&gt; &lt;pick_time&gt; &lt;magnitude_type&gt; &lt;amplitude&gt; &lt;associated_period&gt;</span>
00021 <span class="comment">**</span>
00022 <span class="comment">** 001002003 sssssssssssssss vv ssssss cccccccc nnnnnnnn llllllll yyyymmddhhmmss.sss T aaaaaaaaaaaaa.aa pppppppppppp.ppp</span>
00023 <span class="comment">**                                                                                                                      \n</span>
00024 <span class="comment">**                                                                                                                       \0</span>
00025 <span class="comment">**           1         2         3         4         5         6         7         8         9         0         1         2</span>
00026 <span class="comment">** 01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901</span>
00027 <span class="comment">*/</span>
00028 
<a name="l00029"></a><a class="code" href="global__amp__rw_8h.html#a0">00029</a> <span class="preprocessor">#define GLOBAL_AMP_MAXBUFSIZE (118 + BUFF_OVERRUN_SIZE)</span>
00030 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="global__amp__rw_8h.html#a1">00031</a> <span class="keyword">typedef</span> <span class="keywordtype">char</span> <a class="code" href="global__amp__rw_8h.html#a1">GLOBAL_AMP_BUFFER</a>[<a class="code" href="global__amp__rw_8h.html#a0">GLOBAL_AMP_MAXBUFSIZE</a>+1];
00032 
00033 
<a name="l00034"></a><a class="code" href="structGLOBAL__AMP__MSG.html">00034</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structGLOBAL__AMP__MSG.html">GLOBAL_AMP_MSG</a>
00035 {
<a name="l00036"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m0">00036</a>    <span class="keywordtype">short</span>              <a class="code" href="structGLOBAL__AMP__MSG.html#m0">version</a>;  <span class="comment">/* only set using InitGlobalAmp() or StringToAmp() */</span>
<a name="l00037"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m1">00037</a>    <a class="code" href="structMSG__LOGO.html">MSG_LOGO</a>           <a class="code" href="structGLOBAL__AMP__MSG.html#m1">logo</a>;
<a name="l00038"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m2">00038</a>    <span class="keywordtype">long</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m2">sequence</a>;       <span class="comment">/* pick sequence number */</span>
<a name="l00039"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m3">00039</a>    <span class="keywordtype">char</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m3">station</a>[<a class="code" href="trace__buf_8h.html#a1">TRACE_STA_LEN</a>];
<a name="l00040"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m4">00040</a>    <span class="keywordtype">char</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m4">channel</a>[<a class="code" href="trace__buf_8h.html#a2">TRACE_CHAN_LEN</a>];
<a name="l00041"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m5">00041</a>    <span class="keywordtype">char</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m5">network</a>[<a class="code" href="trace__buf_8h.html#a3">TRACE_NET_LEN</a>];
<a name="l00042"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m6">00042</a>    <span class="keywordtype">char</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m6">location</a>[<a class="code" href="trace__buf_8h.html#a4">TRACE_LOC_LEN</a>];
<a name="l00043"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m7">00043</a>    <span class="keywordtype">char</span>               <a class="code" href="structGLOBAL__AMP__MSG.html#m7">amp_time</a>[19];
<a name="l00044"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m8">00044</a>    <a class="code" href="earthworm__defs_8h.html#a47">AMPLITUDE_TYPE</a>     <a class="code" href="structGLOBAL__AMP__MSG.html#m8">amptype</a>;
<a name="l00045"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m9">00045</a>    <span class="keywordtype">double</span>             <a class="code" href="structGLOBAL__AMP__MSG.html#m9">adcounts</a>; <span class="comment">/* a/d counts */</span>
<a name="l00046"></a><a class="code" href="structGLOBAL__AMP__MSG.html#m10">00046</a>    <span class="keywordtype">double</span>             <a class="code" href="structGLOBAL__AMP__MSG.html#m10">period</a>;   <span class="comment">/* seconds    */</span>
00047 } <a class="code" href="structGLOBAL__AMP__MSG.html">GLOBAL_AMP_STRUCT</a>;
00048 
00049 
00050 
00051 <span class="comment">/* ==========================================================================</span>
00052 <span class="comment">**                    FUNCTION PROTOTYPES</span>
00053 <span class="comment">** ========================================================================= */</span>
00054 
00055 
00056 <span class="comment">/* InitGlobalAmp</span>
00057 <span class="comment">**</span>
00058 <span class="comment">**   Used to initialize, including allocate working memory for</span>
00059 <span class="comment">**   a global amp message struct.</span>
00060 <span class="comment">**</span>
00061 <span class="comment">** PARAMETER:</span>
00062 <span class="comment">**    p_struct -- pointer to structure to contain the message information</span>
00063 <span class="comment">**</span>
00064 <span class="comment">** RETURNS:</span>
00065 <span class="comment">**    GLOBAL_MSG_SUCCESS</span>
00066 <span class="comment">**    GLOBAL_MSG_NULLSTRUCT = structure pointer is NULL</span>
00067 <span class="comment">*/</span>
00068 <a class="code" href="global__msg_8h.html#a1">GLOBAL_MSG_STATUS</a> <a class="code" href="global__amp__rw_8c.html#a1">InitGlobalAmp</a>( <a class="code" href="structGLOBAL__AMP__MSG.html">GLOBAL_AMP_STRUCT</a> * p_struct );
00069 
00070 
00071 
00072 
00073 <span class="comment">/* WriteAmpToBuffer</span>
00074 <span class="comment">**</span>
00075 <span class="comment">**    Writes a global amp message structure to a buffer.</span>
00076 <span class="comment">**</span>
00077 <span class="comment">** PARAMETERS:</span>
00078 <span class="comment">**    p_struct -- the source structure</span>
00079 <span class="comment">**    p_buffer -- the target buffer</span>
00080 <span class="comment">**                (on successful return, buffer will be null-terminated)</span>
00081 <span class="comment">**    p_length -- the available buffer size</span>
00082 <span class="comment">**</span>
00083 <span class="comment">** RETURNS:</span>
00084 <span class="comment">**    GLOBAL_MSG_SUCCESS</span>
00085 <span class="comment">**    GLOBAL_MSG_NULLSTRUCT = structure pointer is NULL</span>
00086 <span class="comment">**    GLOBAL_MSG_VERSINVALID = invalid message version</span>
00087 <span class="comment">**    GLOBAL_MSG_BADPARAM = buffer pointer is NULL</span>
00088 <span class="comment">**    GLOBAL_MSG_TOOSMALL = buffer not large enough to contain message</span>
00089 <span class="comment">**                          (may be partly written anyway)</span>
00090 <span class="comment">**    GLOBAL_MSG_DEFINESMALL = max buffer size too small for normal write</span>
00091 <span class="comment">*/</span>
00092 <a class="code" href="global__msg_8h.html#a1">GLOBAL_MSG_STATUS</a> <a class="code" href="global__amp__rw_8c.html#a2">WriteAmpToBuffer</a>( <a class="code" href="structGLOBAL__AMP__MSG.html">GLOBAL_AMP_STRUCT</a> * p_struct, <span class="keywordtype">char</span> * p_buffer, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p_length );
00093 
00094 
00095 
00096 <span class="comment">/* StringToAmp</span>
00097 <span class="comment">**</span>
00098 <span class="comment">**   Parses any global amp message from a supplied string.</span>
00099 <span class="comment">**</span>
00100 <span class="comment">** RETURNS:</span>
00101 <span class="comment">**    GLOBAL_MSG_SUCCESS</span>
00102 <span class="comment">**    GLOBAL_MSG_NULLSTRUCT = structure pointer is NULL</span>
00103 <span class="comment">**    GLOBAL_MSG_VERSINVALID = invalid message version</span>
00104 <span class="comment">**    GLOBAL_MSG_BADPARAM    = string pointer is NULL</span>
00105 <span class="comment">**    GLOBAL_MSG_FORMATERROR = invalid string format</span>
00106 <span class="comment">**</span>
00107 <span class="comment">*/</span>
00108 <a class="code" href="global__msg_8h.html#a1">GLOBAL_MSG_STATUS</a> <a class="code" href="global__amp__rw_8c.html#a3">StringToAmp</a>( <a class="code" href="structGLOBAL__AMP__MSG.html">GLOBAL_AMP_STRUCT</a> * p_struct, <span class="keywordtype">char</span> * p_string );
00109 
00110 
00111 <span class="preprocessor">#endif</span>
00112 <span class="preprocessor"></span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:02 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
