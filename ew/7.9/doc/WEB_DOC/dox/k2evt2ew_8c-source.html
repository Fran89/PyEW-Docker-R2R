<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>k2evt2ew.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>k2evt2ew.c</h1><a href="k2evt2ew_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> *   THIS FILE IS UNDER RCS - DO NOT MODIFY UNLESS YOU HAVE</span>
00003 <span class="comment"> *   CHECKED IT OUT USING THE COMMAND CHECKOUT.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> *    $Id: k2evt2ew_8c-source.html 2161 2006-05-19 16:55:03Z paulf $</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> *    Revision history:</span>
00008 <span class="comment"> *     $Log$
00008 <span class="comment"> *     Revision 1.1  2006/05/19 16:55:02  paulf
00008 <span class="comment"> *     first inclusion
00008 <span class="comment"> *</span>
00009 <span class="comment"> *     Revision 1.3  2002/02/25 21:28:27  lucky</span>
00010 <span class="comment"> *     Fixed the translation from box to SCN</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> *     Revision 1.1  2001/11/19 16:17:59  lucky</span>
00013 <span class="comment"> *     Initial revision</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *</span>
00016 <span class="comment"> */</span>
00017 
00018 <span class="comment">/*  k2hder2ew.c</span>
00019 <span class="comment"> *  Read a K2-format .evt data file, crack the header, and fill</span>
00020 <span class="comment"> *  the return structure to be returned to the calling program.  </span>
00021 <span class="comment"> *   This code was cloned from nsmp2ew; Credit Jim Luetgert. </span>
00022 <span class="comment"> */</span>
00023 
00024 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00025 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00026 <span class="preprocessor">#include &lt;string.h&gt;</span>
00027 <span class="preprocessor">#include &lt;math.h&gt;</span>
00028 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00029 <span class="preprocessor">#include &lt;time.h&gt;</span>
00030 <span class="preprocessor">#include &lt;<a class="code" href="earthworm_8h.html">earthworm.h</a>&gt;</span>
00031 <span class="preprocessor">#include &lt;<a class="code" href="chron3_8h.html">chron3.h</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;<a class="code" href="kom_8h.html">kom.h</a>&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="swap_8h.html">swap.h</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="k2evt2ew_8h.html">k2evt2ew.h</a>&gt;</span>
00035 
<a name="l00036"></a><a class="code" href="k2evt2ew_8c.html#a0">00036</a> <span class="preprocessor">#define PACKET_MAX_SIZE  3003      </span><span class="comment">/* 2992 + 8 + 3, same as QT */</span>
<a name="l00037"></a><a class="code" href="k2evt2ew_8c.html#a1">00037</a> <span class="preprocessor">#define GRAVITY 978.03      </span><span class="comment">/* Gravity in cm/sec/sec */</span>
<a name="l00038"></a><a class="code" href="k2evt2ew_8c.html#a2">00038</a> <span class="preprocessor">#define SWAP(a,b) temp=(a);(a)=(b);(b)=temp</span>
<a name="l00039"></a><a class="code" href="k2evt2ew_8c.html#a3">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define DECADE   315532800  </span><span class="comment">/* Number of seconds betweeen 1/1/1970 and 1/1/1980 */</span>
00040 
00041 
00042 
<a name="l00043"></a><a class="code" href="k2evt2ew_8c.html#a4">00043</a> <span class="keyword">static</span>          <span class="keywordtype">int</span>             <a class="code" href="k2evt2ew_8c.html#a4">K2EW_Debug</a>;
00044 
00045 
00046 <span class="comment">/* Functions in this source file</span>
00047 <span class="comment"> *******************************/</span>
00048 <span class="keyword">static</span>  <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a> (FILE *fp, <a class="code" href="structKFF__TAG.html">KFF_TAG</a> *);
00049 <span class="keyword">static</span>  <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a6">read_head</a> (FILE *fp, <a class="code" href="structMW__HEADER.html">MW_HEADER</a> *, <span class="keywordtype">int</span> tagLength);
00050 <span class="keyword">static</span>  <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a7">read_frame</a> (FILE *fp, <a class="code" href="structFRAME__HEADER.html">FRAME_HEADER</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *channels );
00051 
00052 <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a8">extract</a>(<span class="keywordtype">int</span> pktdatalen, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pktbuff,
00053             <span class="keywordtype">float</span> *Data, <span class="keywordtype">long</span> *Counts, <span class="keywordtype">float</span> scale, <span class="keywordtype">int</span> nchan, <span class="keywordtype">int</span> jchan, <span class="keywordtype">int</span> *ind);
00054 <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a9">peak_ground</a>(<span class="keywordtype">float</span> *Data, <span class="keywordtype">int</span> npts, <span class="keywordtype">int</span> itype, <span class="keywordtype">float</span> dt, <a class="code" href="struct__SM__INFO.html">SM_INFO</a> *sm);
00055 <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(<span class="keywordtype">float</span> *A, <span class="keywordtype">int</span> N);
00056 <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a11">locut</a>(<span class="keywordtype">float</span> *s, <span class="keywordtype">int</span> nd, <span class="keywordtype">float</span> fcut, <span class="keywordtype">float</span> delt, <span class="keywordtype">int</span> nroll, <span class="keywordtype">int</span> icaus);
00057 <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a12">rdrvaa</a>(<span class="keywordtype">float</span> *acc, <span class="keywordtype">int</span> na, <span class="keywordtype">float</span> omega, <span class="keywordtype">float</span> damp, <span class="keywordtype">float</span> dt,
00058             <span class="keywordtype">float</span> *rd, <span class="keywordtype">float</span> *rv, <span class="keywordtype">float</span> *aa);
00059 <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(<span class="keywordtype">int</span> npts, <span class="keywordtype">float</span> dt, <span class="keywordtype">float</span> *fc, <span class="keywordtype">float</span> *amaxmm, 
00060                                         <span class="keywordtype">float</span> *aminmm, <span class="keywordtype">float</span> *pmax, <span class="keywordtype">int</span> *imin, <span class="keywordtype">int</span> *imax);
00061 
00062 
00063 
00064 
00065 <span class="comment">/******************************************************************************</span>
00066 <span class="comment"> * k2evt2ew()   Read and crack one .evt file.</span>
00067 <span class="comment"> *</span>
00068 <span class="comment"> *  fp:                 File pointer to the .evt file to crack; file must</span>
00069 <span class="comment"> *              previuosly be opened for binary reads.</span>
00070 <span class="comment"> *  fname:      name of the file pointed to by fp (debug purposes)</span>
00071 <span class="comment"> *  pk2info:    pointer to a pre-allocated structure where info from</span>
00072 <span class="comment"> *              the file will be stored.</span>
00073 <span class="comment"> *  pChanName:  pointer to the CHANNELNAME structure containing mappings</span>
00074 <span class="comment"> *              from SM Box and channel number to SCN. This is optional;</span>
00075 <span class="comment"> *              if it is NULL, then default SCN names will be assigned as</span>
00076 <span class="comment"> *              follows: S=box, C=channel number, N=NetCode</span>
00077 <span class="comment"> *  numChans:   Number of channels defined in pChanName</span>
00078 <span class="comment"> *  NetCode:    Network Code to use if pChanName is null.</span>
00079 <span class="comment"> *  Debug:      Integer Debug level.</span>
00080 <span class="comment"> *</span>
00081 <span class="comment"> *  Return Values: EW_SUCCESS and EW_FAILURE, with pk2info filled with</span>
00082 <span class="comment"> *   other useful info.</span>
00083 <span class="comment"> *</span>
00084 <span class="comment"> ******************************************************************************/</span>
<a name="l00085"></a><a class="code" href="k2evt2ew_8c.html#a14">00085</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a14">k2evt2ew</a> (FILE *fp, <span class="keywordtype">char</span> *fname, <a class="code" href="struct__k2info.html">K2InfoStruct</a> *pk2info, 
00086                 <a class="code" href="struct__CHANNELNAME__.html">CHANNELNAME</a> *pChanName, <span class="keywordtype">int</span> numChans, <span class="keywordtype">char</span> *NetCode, <span class="keywordtype">int</span> Debug)
00087 {
00088         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> g_k2mi_buff[<a class="code" href="k2evt2ew_8c.html#a0">PACKET_MAX_SIZE</a>-9]; <span class="comment">/* received data buffer   */</span>
00089     <span class="keywordtype">char</span>     serial[10];
00090     <span class="keywordtype">int</span>      i, j, ci, chanind, nscans;
00091     <span class="keywordtype">int</span>      tlen, flen,  stat, nchans, itype[18], azim[18];
00092     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>  decade, channels;
00093     <span class="keywordtype">float</span>   dt, scale[18], sec1970;
00094 
00095         <span class="keywordflow">if</span> ((fp == NULL) || (fname == NULL) || (pk2info == NULL))
00096         {
00097                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"k2evt2ew: Invalid arguments passed in.\n"</span>);
00098                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00099         }
00100 
00101     <span class="keywordflow">if</span> ((strstr (fname, <span class="stringliteral">".EVT"</span>) == 0) &amp;&amp; (strstr (fname, <span class="stringliteral">".evt"</span>) == 0))
00102         {
00103                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"k2evt2ew: invalid file name &lt;%s&gt;\n"</span>, fname);
00104                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00105         }
00106 
00107         <a class="code" href="k2evt2ew_8c.html#a4">K2EW_Debug</a> = Debug;
00108         sec1970 = (float) 11676096000.00;   <span class="comment">/* # seconds between Carl Johnson's        */</span>
00109                                         <span class="comment">/* time 0 and 1970-01-01 00:00:00.0 GMT    */</span>
00110 
00111 <span class="comment">/* Initialize variables</span>
00112 <span class="comment"> **********************/</span>
00113     memset ( &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m2">frame</a>,  0, <span class="keyword">sizeof</span>(<a class="code" href="structFRAME__HEADER.html">FRAME_HEADER</a>) );
00114     memset ( &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>,  0, <span class="keyword">sizeof</span>(<a class="code" href="structK2__HEADER.html">K2_HEADER</a>) );
00115     memset ( &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>,  0, <span class="keyword">sizeof</span>(<a class="code" href="structKFF__TAG.html">KFF_TAG</a>) );
00116     memset ( &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>,  0, MAX_SM_PER_BOX*<span class="keyword">sizeof</span>(<a class="code" href="struct__SM__INFO.html">SM_INFO</a>) );
00117 
00118 
00119         <span class="comment">/*  Kinemetric time starts 10 years after EW time  */</span>
00120     decade = (365*10+2)*24*60*60;     
00121 
00122 <span class="comment">/* First, just read the header &amp; first frame to get some basic info.</span>
00123 <span class="comment"> ******************************************************************/</span>
00124     rewind(fp);
00125 
00126     tlen = <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>);
00127     stat = <a class="code" href="k2evt2ew_8c.html#a6">read_head</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>, pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>.<a class="code" href="structKFF__TAG.html#m5">length</a>);
00128 
00129     tlen = <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>);
00130     flen = pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>.<a class="code" href="structKFF__TAG.html#m6">dataLength</a>;
00131     <a class="code" href="k2evt2ew_8c.html#a7">read_frame</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m2">frame</a>, &amp;channels);
00132 
00133     nscans = pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m2">duration</a>;
00134     nchans = pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m1">nchannels</a>;
00135     dt  = 1.0/(10.0*(flen/(3.0*nchans)));
00136 
00137     <span class="keywordflow">if</span>(pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m4">flags</a> != 0) 
00138         {
00139         <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"%s: not data. flags = %d \n"</span>,
00140                     fname, pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m4">flags</a>);
00141         <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00142     }
00143 
00144          sprintf(serial, <span class="stringliteral">"%d"</span>, pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m0">serialNumber</a>);
00145 
00146         <span class="comment">/* Find this instrument in the list */</span>
00147         chanind = -1;
00148         <span class="keywordflow">for</span> (ci = 0; ci &lt; numChans; ci++) 
00149         {
00150                 <span class="keywordflow">if</span> (strcmp(serial, pChanName[ci].box) == 0) 
00151                         chanind = ci;
00152     }
00153 
00154     <span class="keywordflow">for</span> (i=0; i&lt;nchans; i++) 
00155         {
00156          pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m6">t</a> = pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m1">triggerTime</a> +  
00157                      (float)pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m6">triggerTimeMsec</a>/1000.0;
00158          pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m6">t</a> = pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m0">startTime</a>   + 
00159                      (float)pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m5">startTimeMsec</a>/1000.0;
00160          pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m6">t</a> += decade;
00161          pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m7">talt</a>    = (float) time(NULL);
00162          pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m8">altcode</a> = <a class="code" href="rw__strongmotion_8h.html#a10">SM_ALTCODE_RECEIVING_MODULE</a>;
00163          itype[i] = 0;
00164          <span class="keywordflow">if</span>( pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>==<a class="code" href="kwhdrs__ew_8h.html#a11">SENSOR_VELOCITY</a> ||
00165                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>==<a class="code" href="kwhdrs__ew_8h.html#a23">SENSOR_MARKL22</a> ||
00166                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>==<a class="code" href="kwhdrs__ew_8h.html#a24">SENSOR_MARKL4C</a>) 
00167                                 itype[i] = 2;
00168          <span class="keywordflow">else</span>
00169          <span class="keywordflow">if</span>((pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>&gt;=<a class="code" href="kwhdrs__ew_8h.html#a12">SENSOR_FBA11</a> &amp;&amp;
00170                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>&lt;=<a class="code" href="kwhdrs__ew_8h.html#a19">SENSOR_FBA23</a>) ||
00171                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>==<a class="code" href="kwhdrs__ew_8h.html#a21">SENSOR_EPI</a> ||
00172                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>==<a class="code" href="kwhdrs__ew_8h.html#a10">SENSOR_ACCELERATION</a>) 
00173                                 itype[i] = 3;
00174 
00175          scale[i] = (2.0*pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m18">fullscale</a>/(1&lt;&lt;24)) 
00176                                                                 / pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m19">sensitivity</a>;
00177 
00178          <span class="keywordflow">if</span> (itype[i]==3) 
00179                                 scale[i] = scale[i] * (float) <a class="code" href="k2evt2ew_8c.html#a1">GRAVITY</a>;
00180 
00181          <span class="keywordflow">if</span> (itype[i]==0) 
00182                  {
00183                 <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"Can't decode sensor type! = %d \n"</span>,
00184                                             pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>);
00185          }
00186          azim[i] = pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m7">azimuth</a>;
00187 
00188                 
00189                 <span class="keywordflow">if</span> (chanind &lt; 0)        
00190                 {
00191                         <span class="comment">/* build default name */</span>
00192                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m0">sta</a>,  pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m2">stnID</a>);
00193                         sprintf (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m1">comp</a>, <span class="stringliteral">"%d"</span>, i);
00194                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m2">net</a>, NetCode);
00195                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m3">loc</a>,  <span class="stringliteral">""</span>);
00196                 }
00197                 <span class="keywordflow">else</span>
00198                 {
00199                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m0">sta</a>,  pChanName[chanind].sta);
00200                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m1">comp</a>, pChanName[chanind].comp);
00201                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m2">net</a>,  pChanName[chanind].net);
00202                         strcpy (pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m3">loc</a>,  pChanName[chanind].loc);
00203                 }
00204     }
00205 
00206     <span class="keywordflow">if</span>(K2EW_Debug)
00207         <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"\n|%s| |%d| |%f| |%s| |%s| \n"</span>,
00208             pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m2">stnID</a>, 
00209                         pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m0">serialNumber</a>, dt,
00210             fname, pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>.<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m3">comment</a>);
00211 
00212 
00213 
00214 
00215 <span class="comment">/* Read and process each channel individually.</span>
00216 <span class="comment"> *********************************************/</span>
00217     <span class="keywordflow">for</span>(i=0;i&lt;nchans;i++) 
00218         {
00219            rewind(fp);
00220            tlen = <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>);
00221            stat = <a class="code" href="k2evt2ew_8c.html#a6">read_head</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m1">head</a>, pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>.<a class="code" href="structKFF__TAG.html#m5">length</a>);
00222 
00223                 <span class="comment">/* initialize trace buffer */</span>
00224                 <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="k2evt2ew_8h.html#a2">MAXTRACELTH</a>; j++) 
00225                 {
00226                         pk2info-&gt;<a class="code" href="struct__k2info.html#m4">Databuf</a>[i][j] = 0.0;
00227                         pk2info-&gt;<a class="code" href="struct__k2info.html#m5">Counts</a>[i][j] = 0;
00228                 }
00229                 pk2info-&gt;<a class="code" href="struct__k2info.html#m6">numDataPoints</a>[i] = 0;
00230 
00231 
00232                 <span class="keywordflow">for</span>(j=0;j&lt;nscans;j++) 
00233                 {
00234                tlen = <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>);
00235 <span class="comment">/*</span>
00236 <span class="comment">logit ("", "tlen = %d\n", tlen);</span>
00237 <span class="comment">               if(tlen != 16) break;</span>
00238 <span class="comment">*/</span>
00239                <span class="keywordflow">if</span>(pk2info-&gt;<a class="code" href="struct__k2info.html#m6">numDataPoints</a>[i] &gt;= <a class="code" href="k2evt2ew_8h.html#a2">MAXTRACELTH</a>) <span class="keywordflow">break</span>;
00240                <a class="code" href="k2evt2ew_8c.html#a7">read_frame</a>(fp, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m2">frame</a>, &amp;channels);
00241                flen = pk2info-&gt;<a class="code" href="struct__k2info.html#m0">tag</a>.<a class="code" href="structKFF__TAG.html#m6">dataLength</a>;
00242                stat = fread(g_k2mi_buff, 1, flen, fp);
00243                <a class="code" href="k2evt2ew_8c.html#a8">extract</a>(flen, g_k2mi_buff, pk2info-&gt;<a class="code" href="struct__k2info.html#m4">Databuf</a>[i], pk2info-&gt;<a class="code" href="struct__k2info.html#m5">Counts</a>[i], 
00244                                                         scale[i], nchans, i, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m6">numDataPoints</a>[i]);
00245                 }
00246 
00247             <span class="keywordflow">if</span>(K2EW_Debug)
00248                 <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"%2d |%s| |%s| |%s| %3d\n"</span>,
00249                     i, pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m0">sta</a>, 
00250                                         pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m1">comp</a>, pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i].<a class="code" href="struct__SM__INFO.html#m2">net</a>, azim[i]);
00251 
00252             dt  = 1.0/(10.0*(flen/(3.0*nchans)));
00253 
00254             <a class="code" href="k2evt2ew_8c.html#a9">peak_ground</a>(pk2info-&gt;<a class="code" href="struct__k2info.html#m4">Databuf</a>[i], pk2info-&gt;<a class="code" href="struct__k2info.html#m6">numDataPoints</a>[i], 
00255                                                                         itype[i], dt, &amp;pk2info-&gt;<a class="code" href="struct__k2info.html#m3">sm</a>[i]);
00256 
00257     } <span class="comment">/* for loop over channels */</span>
00258     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00259 }
00260 
00261 
00262 
00263 <span class="comment">/******************************************************************************</span>
00264 <span class="comment"> * read_tag(fp)  Read the 16 byte tag, swap bytes if necessary, and print.    *</span>
00265 <span class="comment"> ******************************************************************************/</span>
<a name="l00266"></a><a class="code" href="k2evt2ew_8c.html#a5">00266</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a5">read_tag</a> (FILE *fp, <a class="code" href="structKFF__TAG.html">KFF_TAG</a> *tag)
00267 {
00268         <span class="keywordflow">if</span> ((fp == NULL) || (tag == NULL))
00269         {
00270                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_tag: Invalid arguments passed in\n"</span>);
00271                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00272         }
00273 
00274     <span class="keywordflow">if</span> (fread(tag, 1, 16, fp) != 16)
00275         {
00276                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_tag: read of file failed.\n"</span>);
00277                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00278         }
00279 
00280 <span class="preprocessor">#ifdef _INTEL</span>
00281 <span class="preprocessor"></span>    <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;tag-&gt;<a class="code" href="structKFF__TAG.html#m4">type</a>);
00282     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;tag-&gt;<a class="code" href="structKFF__TAG.html#m5">length</a>);
00283     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;tag-&gt;<a class="code" href="structKFF__TAG.html#m6">dataLength</a>);
00284     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;tag-&gt;<a class="code" href="structKFF__TAG.html#m7">id</a>);
00285     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;tag-&gt;<a class="code" href="structKFF__TAG.html#m8">checksum</a>);
00286 <span class="preprocessor">#endif _INTEL</span>
00287 <span class="preprocessor"></span>
00288     <span class="keywordflow">if</span> (<a class="code" href="k2evt2ew_8c.html#a4">K2EW_Debug</a> &gt; 0) 
00289         {
00290         <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"TAG: %c %d %d %d %d %d %d %d %d  \n"</span>,
00291                 tag-&gt;<a class="code" href="structKFF__TAG.html#m0">sync</a>,
00292                 (<span class="keywordtype">int</span>)tag-&gt;<a class="code" href="structKFF__TAG.html#m1">byteOrder</a>,
00293                 (<span class="keywordtype">int</span>)tag-&gt;<a class="code" href="structKFF__TAG.html#m2">version</a>,
00294                 (<span class="keywordtype">int</span>)tag-&gt;<a class="code" href="structKFF__TAG.html#m3">instrumentType</a>,
00295                 tag-&gt;<a class="code" href="structKFF__TAG.html#m4">type</a>, tag-&gt;<a class="code" href="structKFF__TAG.html#m5">length</a>, tag-&gt;<a class="code" href="structKFF__TAG.html#m6">dataLength</a>,
00296                 tag-&gt;<a class="code" href="structKFF__TAG.html#m7">id</a>, tag-&gt;<a class="code" href="structKFF__TAG.html#m8">checksum</a>);
00297     }
00298 
00299     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00300 }
00301 
00302 
00303 <span class="comment">/******************************************************************************</span>
00304 <span class="comment"> * read_head(fp)  Read the file header, swap bytes if necessary, and print.   *</span>
00305 <span class="comment"> ******************************************************************************/</span>
<a name="l00306"></a><a class="code" href="k2evt2ew_8c.html#a6">00306</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a6">read_head</a> (FILE *fp, <a class="code" href="structMW__HEADER.html">MW_HEADER</a> *head, <span class="keywordtype">int</span> tagLength)
00307 {
00308    <span class="keywordtype">int</span>        i, maxchans, siz;
00309 
00310         <span class="keywordflow">if</span> ((fp == NULL) || (head == NULL))
00311         {
00312                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: Invalid arguments passed in\n"</span>);
00313                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00314         }
00315 
00316 <span class="comment">/* Read in the file header.</span>
00317 <span class="comment">   If a K2, there will be 2040 bytes,</span>
00318 <span class="comment">   otherwise assume a Mt Whitney.</span>
00319 <span class="comment"> ************************************/</span>
00320     maxchans = tagLength==2040? <a class="code" href="kwhdrs__ew_8h.html#a4">MAX_K2_CHANNELS</a>:<a class="code" href="kwhdrs__ew_8h.html#a2">MAX_MW_CHANNELS</a>;
00321 
00322     <span class="keywordflow">if</span> (fread(head, 1, 8, fp) != 8)
00323         {
00324                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00325                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00326         }
00327 
00328         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structMISC__RO__PARMS.html">MISC_RO_PARMS</a>) + sizeof(struct TIMING_RO_PARMS);
00329     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00330         {
00331                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00332                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00333         }
00334 
00335         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structCHANNEL__RO__PARMS.html">CHANNEL_RO_PARMS</a>)*maxchans;
00336     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[0], 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00337         {
00338                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00339                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00340         }
00341 
00342         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structSTREAM__RO__PARMS.html">STREAM_RO_PARMS</a>);
00343     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00344         {
00345                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00346                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00347         }
00348 
00349         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structMISC__RW__PARMS.html">MISC_RW_PARMS</a>)+sizeof(struct TIMING_RW_PARMS);
00350     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00351         {
00352                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00353                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00354         }
00355 
00356     siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structCHANNEL__RW__PARMS.html">CHANNEL_RW_PARMS</a>)*maxchans;
00357     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[0], 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00358         {
00359                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00360                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00361         }
00362 
00363     <span class="keywordflow">if</span>(tagLength==2040) {
00364         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structSTREAM__K2__RW__PARMS.html">STREAM_K2_RW_PARMS</a>);
00365         <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00366                 {
00367                         <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00368                         <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00369                 }
00370     } <span class="keywordflow">else</span> {
00371         siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structSTREAM__MW__RW__PARMS.html">STREAM_MW_RW_PARMS</a>);
00372         <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00373                 {
00374                         <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00375                         <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00376                 }
00377     }
00378     siz = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structMODEM__RW__PARMS.html">MODEM_RW_PARMS</a>);
00379     <span class="keywordflow">if</span> (fread(&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m4">modem</a>, 1, siz, fp) != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) siz)
00380         {
00381                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_head: read of file failed.\n"</span>);
00382                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00383         }
00384 
00385 
00386 <span class="preprocessor">#ifdef _INTEL</span>
00387 <span class="preprocessor"></span>        <span class="comment">/* Byte-swap values, if necessary */</span>
00388 
00389         <span class="comment">/* roParms */</span>
00390     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m2">headerVersion</a>);
00391     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m3">headerBytes</a>);
00392 
00393     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m4">installedChan</a>);
00394     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m5">maxChannels</a>);
00395     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m6">sysBlkVersion</a>);
00396     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m7">bootBlkVersion</a>);
00397     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m8">appBlkVersion</a>);
00398     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m9">dspBlkVersion</a>);
00399     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m10">batteryVoltage</a>);
00400     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m11">crc</a>);
00401     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m12">flags</a>);
00402     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m13">temperature</a>);
00403 
00404     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m4">gpsLockFailCount</a>);
00405     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m5">gpsUpdateRTCCount</a>);
00406     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m6">acqDelay</a>);
00407     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m7">gpsLatitude</a>);
00408     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m8">gpsLongitude</a>);
00409     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m9">gpsAltitude</a>);
00410     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m10">dacCount</a>);
00411     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m12">gpsLastDrift</a>[0]);
00412     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m12">gpsLastDrift</a>[1]);
00413     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m13">gpsLastTurnOnTime</a>[0]);
00414     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m13">gpsLastTurnOnTime</a>[1]);
00415     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m14">gpsLastUpdateTime</a>[0]);
00416     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m14">gpsLastUpdateTime</a>[1]);
00417     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m15">gpsLastLockTime</a>[0]);
00418     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m15">gpsLastLockTime</a>[1]);
00419 
00420     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m0">startTime</a>);
00421     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m1">triggerTime</a>);
00422     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m2">duration</a>);
00423     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m3">errors</a>);
00424     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m4">flags</a>);
00425     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m5">startTimeMsec</a>);
00426     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m6">triggerTimeMsec</a>);
00427     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m7">nscans</a>);
00428 
00429 
00430     <span class="keywordflow">for</span>(i=0;i&lt;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m5">maxChannels</a>;i++) 
00431         {
00432         <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m0">maxPeak</a>);
00433         <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m1">maxPeakOffset</a>);
00434         <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m2">minPeak</a>);
00435         <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m3">minPeakOffset</a>);
00436         <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m4">mean</a>);
00437         }
00438 
00439 
00440         <span class="comment">/* rwParams */</span>
00441     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m0">serialNumber</a>);
00442     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m1">nchannels</a>);
00443     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m4">elevation</a>);
00444     <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m5">latitude</a>);
00445     <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m6">longitude</a>);
00446     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m7">userCodes</a>[0]);
00447     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m7">userCodes</a>[1]);
00448     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m7">userCodes</a>[2]);
00449     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m7">userCodes</a>[3]);
00450     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m12">cutler_bitmap</a>);
00451     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m13">channel_bitmap</a>);
00452 
00453     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m1">timing</a>.<a class="code" href="structTIMING__RW__PARMS.html#m3">localOffset</a>);
00454 
00455     <span class="keywordflow">for</span>(i=0;i&lt;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m1">nchannels</a>;i++) 
00456         {
00457         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m2">sensorSerialNumberExt</a>);
00458         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m3">north</a>);
00459         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m4">east</a>);
00460         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m5">up</a>);
00461         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m6">altitude</a>);
00462         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m7">azimuth</a>);
00463         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>);
00464         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m9">sensorSerialNumber</a>);
00465         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m10">gain</a>);
00466         <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m15">StaLtaRatio</a>);
00467         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m18">fullscale</a>);
00468         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m19">sensitivity</a>);
00469         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m20">damping</a>);
00470         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m21">naturalFrequency</a>);
00471         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m22">triggerThreshold</a>);
00472         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m23">detriggerThreshold</a>);
00473         <a class="code" href="swap_8c.html#a5">SwapFloat</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m24">alarmTriggerThreshold</a>);
00474     }
00475 
00476     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m4">eventNumber</a>);
00477     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m5">sps</a>);
00478     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m6">apw</a>);
00479     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m7">preEvent</a>);
00480     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m8">postEvent</a>);
00481     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m9">minRunTime</a>);
00482     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m10">VotesToTrigger</a>);
00483     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m11">VotesToDetrigger</a>);
00484     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m16">Timeout</a>);
00485     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m17">TxBlkSize</a>);
00486     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m18">BufferSize</a>);
00487     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m19">SampleRate</a>);
00488     <a class="code" href="swap_8c.html#a2">SwapLong</a> (&amp;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m20">TxChanMap</a>);
00489 <span class="preprocessor">#endif _INTEL</span>
00490 <span class="preprocessor"></span>
00491 
00492     <span class="keywordflow">if</span>(<a class="code" href="k2evt2ew_8c.html#a4">K2EW_Debug</a> &gt; 0)
00493         {
00494             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"HEADER: %c%c%c %d %hu %hu \n"</span>,
00495                  head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m0">id</a>[0], head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m0">id</a>[1], head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m0">id</a>[2],
00496                  (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m1">instrumentCode</a>,
00497              head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m2">headerVersion</a>,
00498              head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m3">headerBytes</a>);
00499 
00500             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"MISC_RO_PARMS: %d %d %d %hu %hu %hu %hu %hu %hu %d %hu %hu %d \n"</span>,
00501             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m0">a2dBits</a>,
00502             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m1">sampleBytes</a>,
00503             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m2">restartSource</a>,
00504             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m4">installedChan</a>,
00505             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m5">maxChannels</a>,
00506             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m6">sysBlkVersion</a>,
00507             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m7">bootBlkVersion</a>,
00508             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m8">appBlkVersion</a>,
00509             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m9">dspBlkVersion</a>,
00510             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m10">batteryVoltage</a>,
00511             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m11">crc</a>,
00512             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m12">flags</a>,
00513             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m13">temperature</a> );
00514 
00515 
00516             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"TIMING_RO_PARMS: %d %d %d %hu %hu %d %d %d %d %hu %d %d %lu %lu %lu %lu %lu %lu \n"</span>,
00517             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m0">clockSource</a>,
00518             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m1">gpsStatus</a>,
00519             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m2">gpsSOH</a>,
00520             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m4">gpsLockFailCount</a>,
00521             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m5">gpsUpdateRTCCount</a>,
00522             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m6">acqDelay</a>,
00523             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m7">gpsLatitude</a>,
00524             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m8">gpsLongitude</a>,
00525             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m9">gpsAltitude</a>,
00526             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m10">dacCount</a>,
00527             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m12">gpsLastDrift</a>[0],
00528             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m12">gpsLastDrift</a>[1],
00529             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m13">gpsLastTurnOnTime</a>[0],
00530             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m13">gpsLastTurnOnTime</a>[1],
00531             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m14">gpsLastUpdateTime</a>[0],
00532             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m14">gpsLastUpdateTime</a>[1],
00533             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m15">gpsLastLockTime</a>[0],
00534             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m5">timing</a>.<a class="code" href="structTIMING__RO__PARMS.html#m15">gpsLastLockTime</a>[1] );
00535 
00536 
00537             <span class="keywordflow">for</span>(i=0;i&lt;head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m4">misc</a>.<a class="code" href="structMISC__RO__PARMS.html#m5">maxChannels</a>;i++) 
00538                 {
00539                 <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"CHANNEL_RO_PARMS: %d %lu %d %lu %d %d \n"</span>,
00540                     head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m0">maxPeak</a>,
00541                 head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m1">maxPeakOffset</a>,
00542                     head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m2">minPeak</a>,
00543                 head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m3">minPeakOffset</a>,
00544                 head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m4">mean</a>,
00545                 head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m6">channel</a>[i].<a class="code" href="structCHANNEL__RO__PARMS.html#m5">aqOffset</a> );
00546         }
00547 
00548         <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"STREAM_RO_PARMS: %d %d %d %d %d %d %d %d \n"</span>,
00549             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m0">startTime</a>,
00550             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m1">triggerTime</a>,
00551             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m2">duration</a>,
00552             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m3">errors</a>,
00553             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m4">flags</a>,
00554             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m5">startTimeMsec</a>,
00555             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m6">triggerTimeMsec</a>,
00556             head-&gt;<a class="code" href="structMW__HEADER.html#m0">roParms</a>.<a class="code" href="structRO__MW__PARMS.html#m7">stream</a>.<a class="code" href="structSTREAM__RO__PARMS.html#m7">nscans</a>  );
00557 
00558 
00559 
00560             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"MISC_RW_PARMS: %hu %hu %.5s %.33s %d %f %f %d %d %d %d %d %lo %d %.17s %d %d\n"</span>,
00561             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m0">serialNumber</a>,
00562             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m1">nchannels</a>,
00563             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m2">stnID</a>,
00564             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m3">comment</a>,
00565             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m4">elevation</a>,
00566             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m5">latitude</a>,
00567             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m6">longitude</a>,
00568            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m8">cutlerCode</a>,
00569            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m9">minBatteryVoltage</a>,
00570            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m10">cutler_decimation</a>,
00571            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m11">cutler_irig_type</a>,
00572             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m12">cutler_bitmap</a>,
00573             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m13">channel_bitmap</a>,
00574            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m14">cutler_protocol</a>,
00575             head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m15">siteID</a>,
00576            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m16">externalTrigger</a>,
00577            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m17">networkFlag</a> );
00578 
00579             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"TIMING_RW_PARMS: %d %d %hu \n"</span>,
00580            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m1">timing</a>.<a class="code" href="structTIMING__RW__PARMS.html#m0">gpsTurnOnInterval</a>,
00581            (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m1">timing</a>.<a class="code" href="structTIMING__RW__PARMS.html#m1">gpsMaxTurnOnTime</a>,
00582                head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m1">timing</a>.<a class="code" href="structTIMING__RW__PARMS.html#m3">localOffset</a>  );
00583 
00584             <span class="keywordflow">for</span>(i=0;i&lt;head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m0">misc</a>.<a class="code" href="structMISC__RW__PARMS.html#m1">nchannels</a>;i++) 
00585                 {
00586                 <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, 
00587                                 <span class="stringliteral">"CHANNEL_RW_PARMS: %s %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %f %f %f %f %f %f %f \n"</span>,
00588                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m0">id</a>,
00589                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m2">sensorSerialNumberExt</a>,
00590                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m3">north</a>,
00591                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m4">east</a>,
00592                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m5">up</a>,
00593                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m6">altitude</a>,
00594                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m7">azimuth</a>,
00595                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m8">sensorType</a>,
00596                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m9">sensorSerialNumber</a>,
00597                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m10">gain</a>,
00598                (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m11">triggerType</a>,
00599                (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m12">iirTriggerFilter</a>,
00600                (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m13">StaSeconds</a>,
00601                (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m14">LtaSeconds</a>,
00602                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m15">StaLtaRatio</a>,
00603                (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m16">StaLtaPercent</a>,
00604                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m18">fullscale</a>,
00605                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m19">sensitivity</a>,
00606                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m20">damping</a>,
00607                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m21">naturalFrequency</a>,
00608                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m22">triggerThreshold</a>,
00609                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m23">detriggerThreshold</a>,
00610                    head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m2">channel</a>[i].<a class="code" href="structCHANNEL__RW__PARMS.html#m24">alarmTriggerThreshold</a>);
00611                 }
00612 
00613             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"STREAM_K2_RW_PARMS: |%d| |%d| |%d| %d %d %d %d %d %d %d %d %d %d %d %d %d %d %lu\n"</span>,
00614             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m0">filterFlag</a>,
00615             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m1">primaryStorage</a>,
00616             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m2">secondaryStorage</a>,
00617                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m4">eventNumber</a>,
00618                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m5">sps</a>,
00619                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m6">apw</a>,
00620                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m7">preEvent</a>,
00621                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m8">postEvent</a>,
00622                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m9">minRunTime</a>,
00623                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m10">VotesToTrigger</a>,
00624                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m11">VotesToDetrigger</a>,
00625             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m13">FilterType</a>,
00626             (<span class="keywordtype">int</span>)head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m14">DataFmt</a>,
00627                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m16">Timeout</a>,
00628                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m17">TxBlkSize</a>,
00629                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m18">BufferSize</a>,
00630                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m19">SampleRate</a>,
00631                 head-&gt;<a class="code" href="structMW__HEADER.html#m1">rwParms</a>.<a class="code" href="structRW__MW__PARMS.html#m3">stream</a>.<a class="code" href="structSTREAM__MW__RW__PARMS.html#m20">TxChanMap</a>);
00632 
00633         } <span class="comment">/* If debug */</span>
00634 
00635     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00636 
00637 } <span class="comment">/* read_head */</span>
00638 
00639 
00640 <span class="comment">/******************************************************************************</span>
00641 <span class="comment"> * read_frame(fp)  Read the frame header, swap bytes if necessary.            *</span>
00642 <span class="comment"> ******************************************************************************/</span>
<a name="l00643"></a><a class="code" href="k2evt2ew_8c.html#a7">00643</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a7">read_frame</a> (FILE *fp, <a class="code" href="structFRAME__HEADER.html">FRAME_HEADER</a> *frame, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *channels )
00644 {
00645     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>   frameStatus, frameStatus2, samprate, streamnumber;
00646     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>    BitMap[4];
00647     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>    bmap;
00648 
00649         <span class="keywordflow">if</span> ((fp == NULL) || (frame == NULL) || (channels == NULL))
00650         {
00651                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_frame: invalid arguments passed in.\n"</span>);
00652                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00653         }
00654 
00655 
00656     <span class="keywordflow">if</span> (fread(frame, 32, 1, fp) != 1)
00657         {
00658                 <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"read_frame: read of file failed.\n"</span>);
00659                 <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00660         }
00661 
00662 
00663 <span class="preprocessor">#ifdef _INTEL</span>
00664 <span class="preprocessor"></span>    <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m2">recorderID</a>);
00665     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m3">frameSize</a>);
00666     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m4">blockTime</a>);
00667     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m5">blockTime2</a>);
00668     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m6">channelBitMap</a>);
00669     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m7">streamPar</a>);
00670     <a class="code" href="swap_8c.html#a0">SwapShort</a> (&amp;frame-&gt;<a class="code" href="structFRAME__HEADER.html#m10">msec</a>); 
00671 <span class="preprocessor">#endif _INTEL</span>
00672 <span class="preprocessor"></span>
00673     BitMap[0] = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m6">channelBitMap</a> &amp; 255;
00674     BitMap[1] = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m6">channelBitMap</a> &gt;&gt; 8;
00675     BitMap[2] = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m11">channelBitMap1</a>;
00676     BitMap[3] = 0;
00677 
00678     bmap = *((<span class="keywordtype">long</span> *)(BitMap));
00679     frameStatus      = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m8">frameStatus</a>;
00680     frameStatus2     = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m9">frameStatus2</a>;
00681     samprate         = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m7">streamPar</a> &amp; 4095;
00682     streamnumber     = frame-&gt;<a class="code" href="structFRAME__HEADER.html#m7">streamPar</a> &gt;&gt; 12;
00683     
00684     <span class="keywordflow">if</span>(<a class="code" href="k2evt2ew_8c.html#a4">K2EW_Debug</a> &gt; 0)
00685             <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">"e"</span>, <span class="stringliteral">"FRAME: %d %d %d %d   %lu X%ho   %hu X%ho %hu %hu     X%ho X%ho %hu X%ho \n"</span>,
00686             (<span class="keywordtype">int</span>)frame-&gt;<a class="code" href="structFRAME__HEADER.html#m0">frameType</a>,
00687             (<span class="keywordtype">int</span>)frame-&gt;<a class="code" href="structFRAME__HEADER.html#m1">instrumentCode</a>,
00688             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m2">recorderID</a>,
00689             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m3">frameSize</a>,
00690             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m4">blockTime</a>,
00691             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m6">channelBitMap</a>,
00692             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m7">streamPar</a>, streamnumber, samprate, samprate&gt;&gt;8,
00693             frameStatus,
00694             frameStatus2,
00695             frame-&gt;<a class="code" href="structFRAME__HEADER.html#m10">msec</a>,
00696             (<span class="keywordtype">int</span>)frame-&gt;<a class="code" href="structFRAME__HEADER.html#m11">channelBitMap1</a>);
00697 
00698     *channels = bmap;
00699 
00700     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00701 }
00702 
00703 
00704 <span class="comment">/******************************************************************************</span>
00705 <span class="comment"> * extract: Processes k2 file buffers to expand data from 24 bits to          *</span>
00706 <span class="comment"> *         36 bits, sort channels and scale to cgs units.                     *</span>
00707 <span class="comment"> *         pktdatalen - length of data in buffer                              *</span>
00708 <span class="comment"> *         pktbuff    - address of buffer containing the data bytes           *</span>
00709 <span class="comment"> *         Data       - the destination array.                                *</span>
00710 <span class="comment"> *         scale      - the scaling factor (units/count).                     *</span>
00711 <span class="comment"> *         nchan      - the total number of channels in the buffer.           *</span>
00712 <span class="comment"> *         jchan      - the channel to be extracted.                          *</span>
00713 <span class="comment"> *         ind        - the current index in the destination array.           *</span>
00714 <span class="comment"> ******************************************************************************/</span>
00715 
<a name="l00716"></a><a class="code" href="k2evt2ew_8c.html#a8">00716</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a8">extract</a>(<span class="keywordtype">int</span> pktdatalen, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pktbuff, <span class="keywordtype">float</span> *Data, 
00717                                         <span class="keywordtype">long</span> *Counts, <span class="keywordtype">float</span> scale, <span class="keywordtype">int</span> nchan, <span class="keywordtype">int</span> jchan, <span class="keywordtype">int</span> *ind)
00718 {
00719     <span class="keywordtype">int</span>     k, pktpos, ichan;
00720     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> btarr[4];
00721 
00722   <span class="comment">/* process and store serial data stream values */</span>
00723     k = *ind;
00724     pktpos = ichan = 0;
00725     <span class="keywordflow">while</span> (pktpos &lt; pktdatalen) {
00726         <span class="comment">/* loop through each serial data stream sample data value */</span>
00727         <span class="keywordflow">if</span>(ichan == jchan) {
00728             btarr[1] = pktbuff[pktpos++];    <span class="comment">/* copy MSByte of 24-bit value */</span>
00729             btarr[2] = pktbuff[pktpos++];    <span class="comment">/* copy middle-byte of 24-bit value */</span>
00730             btarr[3] = pktbuff[pktpos++];    <span class="comment">/* copy LSByte of 24-bit value */</span>
00731             <span class="comment">/* sign extend to 32-bits */</span>
00732 
00733             btarr[0] = ((btarr[1] &amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)0x80) ==
00734                       (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)0) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)0 : (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)0xFF;
00735 
00736             <span class="comment">/* byte-swap and enter value */</span>
00737 <span class="preprocessor">#ifdef _INTEL</span>
00738 <span class="preprocessor"></span>                        <a class="code" href="swap_8c.html#a2">SwapLong</a> ((<span class="keywordtype">long</span> *) btarr);
00739 <span class="preprocessor">#endif</span>
00740 <span class="preprocessor"></span>            Counts[k] = (*((<span class="keywordtype">long</span> *)(btarr)));
00741             Data[k] = Counts[k]*scale;
00742                         k = k + 1;
00743         } <span class="keywordflow">else</span> {
00744             pktpos += 3;
00745         }
00746         ichan += 1;
00747         <span class="keywordflow">if</span>(ichan &gt;= nchan) ichan = 0;
00748     }
00749 
00750     *ind = k;
00751     <span class="keywordflow">return</span> 0;
00752 }
00753 
00754 <span class="comment">/******************************************************************************</span>
00755 <span class="comment"> *   subroutine for estimation of ground motion                               *</span>
00756 <span class="comment"> *                                                                            *</span>
00757 <span class="comment"> *   input:                                                                   *</span>
00758 <span class="comment"> *           Data   - data array                                              *</span>
00759 <span class="comment"> *           npts   - number of points in timeseries                          *</span>
00760 <span class="comment"> *           itype  - units for timeseries. 1=disp 2=vel 3=acc                *</span>
00761 <span class="comment"> *           dt     - sample spacing in sec                                   *</span>
00762 <span class="comment"> *   return:                                                                  *</span>
00763 <span class="comment"> *           0      - All OK                                                  *</span>
00764 <span class="comment"> *           1      - error                                                   *</span>
00765 <span class="comment"> *                                                                            *</span>
00766 <span class="comment"> ******************************************************************************/</span>
<a name="l00767"></a><a class="code" href="k2evt2ew_8c.html#a9">00767</a> <span class="keywordtype">int</span> <a class="code" href="k2evt2ew_8c.html#a9">peak_ground</a>(<span class="keywordtype">float</span> *Data, <span class="keywordtype">int</span> npts, <span class="keywordtype">int</span> itype, <span class="keywordtype">float</span> dt, <a class="code" href="struct__SM__INFO.html">SM_INFO</a> *sm)
00768 {
00769     <span class="keywordtype">int</span>     imax_acc, imax_vel, imax_dsp, imax_raw;
00770     <span class="keywordtype">int</span>     imin_acc, imin_vel, imin_dsp, imin_raw;
00771     <span class="keywordtype">int</span>     ii, kk, kpts, <a class="code" href="getutil_8c.html#a13">id</a>[4], npd[4][2], icaus;
00772     <span class="keywordtype">float</span>  totint, a, tpi, omega, damp, rd, rv, aa;
00773     <span class="keywordtype">float</span>  amax_acc, amin_acc, pmax_acc;
00774     <span class="keywordtype">float</span>  amax_vel, amin_vel, pmax_vel;
00775     <span class="keywordtype">float</span>  amax_dsp, amin_dsp, pmax_dsp;
00776     <span class="keywordtype">float</span>  amax_raw, amin_raw, pmax_raw, gd[4], sd[4];
00777         <span class="keywordtype">float</span>    d1[<a class="code" href="k2evt2ew_8h.html#a2">MAXTRACELTH</a>];
00778         <span class="keywordtype">float</span>    d2[<a class="code" href="k2evt2ew_8h.html#a2">MAXTRACELTH</a>];
00779         <span class="keywordtype">float</span>    d3[<a class="code" href="k2evt2ew_8h.html#a2">MAXTRACELTH</a>];
00780 
00781     gd[0] = 0.05;
00782     gd[1] = 0.10;
00783     gd[2] = 0.20;
00784     gd[3] = 0.50;
00785     icaus = 1;
00786 
00787     tpi  = 8.0*atan(1.0);
00788 
00789 <span class="comment">/* Find the raw maximum and its period</span>
00790 <span class="comment"> *************************************/</span>
00791 
00792     <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(Data, npts);
00793     <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(npts, dt, Data, &amp;amin_raw, &amp;amax_raw, &amp;pmax_raw, &amp;imin_raw, &amp;imax_raw);
00794 
00795     <span class="keywordflow">if</span>(itype == 1) {  <span class="comment">/* input data is displacement  */</span>
00796         <span class="keywordflow">for</span>(kk=0;kk&lt;npts;kk++) d1[kk] = Data[kk];
00797         <a class="code" href="k2evt2ew_8c.html#a11">locut</a>(d1, npts, 0.17, dt, 2, icaus);
00798         <span class="keywordflow">for</span>(kk=1;kk&lt;npts;kk++) {
00799             d2[kk] = (d1[kk] - d1[kk-1])/dt;
00800         }
00801         d2[0] = d2[1];
00802         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d2, npts);
00803         <span class="keywordflow">for</span>(kk=1;kk&lt;npts;kk++) {
00804             d3[kk] = (d2[kk] - d2[kk-1])/dt;
00805         }
00806         d3[0] = d3[1];
00807         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d3, npts);
00808     } <span class="keywordflow">else</span>
00809     <span class="keywordflow">if</span>(itype == 2) {  <span class="comment">/* input data is velocity      */</span>
00810         <span class="keywordflow">for</span>(kk=0;kk&lt;npts;kk++) d2[kk] = Data[kk];
00811         <a class="code" href="k2evt2ew_8c.html#a11">locut</a>(d2, npts, 0.17, dt, 2, icaus);
00812         <span class="keywordflow">for</span>(kk=1;kk&lt;npts;kk++) {
00813             d3[kk] = (d2[kk] - d2[kk-1])/dt;
00814         }
00815         d3[0] = d3[1];
00816         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d3, npts);
00817 
00818         totint = 0.0;
00819         <span class="keywordflow">for</span>(kk=0;kk&lt;npts-1;kk++) {
00820             totint = totint + (d2[kk] + d2[kk+1])*0.5*dt;
00821             d1[kk] = totint;
00822         }
00823         d1[npts-1] = d1[npts-2];
00824         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d1, npts);
00825 
00826     } <span class="keywordflow">else</span>
00827     <span class="keywordflow">if</span>(itype == 3) {  <span class="comment">/* input data is acceleration  */</span>
00828         <span class="keywordflow">for</span>(kk=0;kk&lt;npts;kk++) d3[kk] = Data[kk];
00829         <a class="code" href="k2evt2ew_8c.html#a11">locut</a>(d3, npts, 0.17, dt, 2, icaus);
00830 
00831         totint = 0.0;
00832         <span class="keywordflow">for</span>(kk=0;kk&lt;npts-1;kk++) {
00833             totint = totint + (d3[kk] + d3[kk+1])*0.5*dt;
00834             d2[kk] = totint;
00835         }
00836         d2[npts-1] = d2[npts-2];
00837         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d2, npts);
00838 
00839         totint = 0.0;
00840         <span class="keywordflow">for</span>(kk=0;kk&lt;npts-1;kk++) {
00841             totint = totint + (d2[kk] + d2[kk+1])*0.5*dt;
00842             d1[kk] = totint;
00843         }
00844         d1[npts-1] = d1[npts-2];
00845         <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(d1, npts);
00846     } <span class="keywordflow">else</span> {
00847         <span class="keywordflow">return</span> 1;
00848     }
00849 
00850 <span class="comment">/* Find the displacement(cm), velocity(cm/s), &amp; acceleration(cm/s/s) maxima  and their periods</span>
00851 <span class="comment"> *********************************************************************************************/</span>
00852 
00853     <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(npts, dt, &amp;d1[0], &amp;amin_dsp, &amp;amax_dsp, &amp;pmax_dsp, &amp;imin_dsp, &amp;imax_dsp);
00854     <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(npts, dt, &amp;d2[0], &amp;amin_vel, &amp;amax_vel, &amp;pmax_vel, &amp;imin_vel, &amp;imax_vel);
00855     <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(npts, dt, &amp;d3[0], &amp;amin_acc, &amp;amax_acc, &amp;pmax_acc, &amp;imin_acc, &amp;imax_acc);
00856 
00857 <span class="comment">/* Find the spectral response</span>
00858 <span class="comment"> ****************************/</span>
00859 
00860     damp = 0.05;
00861     kk = 0;
00862     sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk] = 0.3;
00863     omega = tpi/sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk];
00864     <a class="code" href="k2evt2ew_8c.html#a12">rdrvaa</a>(&amp;d3[0], npts-1, omega, damp, dt, &amp;rd, &amp;rv, &amp;aa);
00865     sm-&gt;<a class="code" href="struct__SM__INFO.html#m17">rsa</a>[kk] = aa;
00866     kk += 1;
00867 
00868     sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk] = 1.0;
00869     omega = tpi/sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk];
00870     <a class="code" href="k2evt2ew_8c.html#a12">rdrvaa</a>(&amp;d3[0], npts-1, omega, damp, dt, &amp;rd, &amp;rv, &amp;aa);
00871     sm-&gt;<a class="code" href="struct__SM__INFO.html#m17">rsa</a>[kk] = aa;
00872     kk += 1;
00873 
00874     sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk] = 3.0;
00875     omega = tpi/sm-&gt;<a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[kk];
00876     <a class="code" href="k2evt2ew_8c.html#a12">rdrvaa</a>(&amp;d3[0], npts-1, omega, damp, dt, &amp;rd, &amp;rv, &amp;aa);
00877     sm-&gt;<a class="code" href="struct__SM__INFO.html#m17">rsa</a>[kk] = aa;
00878     kk += 1;
00879 
00880     sm-&gt;<a class="code" href="struct__SM__INFO.html#m15">nrsa</a> = kk;
00881 
00882 <span class="comment">/* Since we are here, determine the duration of strong shaking</span>
00883 <span class="comment"> *************************************************************/</span>
00884 
00885     <span class="keywordflow">for</span>(kk=0;kk&lt;4;kk++) {
00886         <a class="code" href="getutil_8c.html#a13">id</a>[kk] = npd[kk][1] = npd[kk][2] = 0;
00887         <span class="keywordflow">for</span>(ii=1;ii&lt;=npts-1;ii++) {
00888             a = fabs(d3[ii]/GRAVITY);
00889             <span class="keywordflow">if</span> (a &gt;= gd[kk]) {
00890                 <a class="code" href="getutil_8c.html#a13">id</a>[kk] = <a class="code" href="getutil_8c.html#a13">id</a>[kk] + 1;
00891                 <span class="keywordflow">if</span> (<a class="code" href="getutil_8c.html#a13">id</a>[kk] == 1) npd[kk][1] = ii;
00892                 npd[kk][2] = ii;
00893             }
00894         }
00895         <span class="keywordflow">if</span> (<a class="code" href="getutil_8c.html#a13">id</a>[kk] != 0) {
00896             kpts = npd[kk][2] - npd[kk][1] + 1;
00897             sd[kk] = kpts*dt;
00898         } <span class="keywordflow">else</span> {
00899             sd[kk] = 0.0;
00900         }
00901     }
00902 
00903     sm-&gt;<a class="code" href="struct__SM__INFO.html#m13">pgd</a> = fabs(amin_dsp)&gt;fabs(amax_dsp)? fabs(amin_dsp):fabs(amax_dsp);
00904     sm-&gt;<a class="code" href="struct__SM__INFO.html#m11">pgv</a> = fabs(amin_vel)&gt;fabs(amax_vel)? fabs(amin_vel):fabs(amax_vel);
00905     sm-&gt;<a class="code" href="struct__SM__INFO.html#m9">pga</a> = fabs(amin_acc)&gt;fabs(amax_acc)? fabs(amin_acc):fabs(amax_acc);
00906 
00907     sm-&gt;<a class="code" href="struct__SM__INFO.html#m14">tpgd</a> = fabs(amin_dsp)&gt;fabs(amax_dsp)? sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imin_dsp:sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imax_dsp;
00908     sm-&gt;<a class="code" href="struct__SM__INFO.html#m12">tpgv</a> = fabs(amin_vel)&gt;fabs(amax_vel)? sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imin_vel:sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imax_vel;
00909     sm-&gt;<a class="code" href="struct__SM__INFO.html#m10">tpga</a> = fabs(amin_acc)&gt;fabs(amax_acc)? sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imin_acc:sm-&gt;<a class="code" href="struct__SM__INFO.html#m6">t</a> + dt*imax_acc;
00910 
00911     <span class="keywordflow">return</span> 0;
00912 }
00913 
00914 
00915 <span class="comment">/******************************************************************************</span>
00916 <span class="comment"> *  demean removes the mean from the n point series stored in array A.        *</span>
00917 <span class="comment"> *                                                                            *</span>
00918 <span class="comment"> ******************************************************************************/</span>
<a name="l00919"></a><a class="code" href="k2evt2ew_8c.html#a10">00919</a> <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a10">demean</a>(<span class="keywordtype">float</span> *A, <span class="keywordtype">int</span> n)
00920 {
00921     <span class="keywordtype">int</span>       i;
00922     <span class="keywordtype">float</span>    xm;
00923 
00924     xm = 0.0;
00925     <span class="keywordflow">for</span>(i=0;i&lt;n;i++) xm = xm + A[i];
00926     xm = xm/n;
00927     <span class="keywordflow">for</span>(i=0;i&lt;n;i++) A[i] = A[i] - xm;
00928 }
00929 
00930 
00931 <span class="comment">/******************************************************************************</span>
00932 <span class="comment"> *  Butterworth locut filter order 2*nroll (nroll&lt;=8)                         *</span>
00933 <span class="comment"> *   (see Kanasewich, Time Sequence Analysis in Geophysics,                   *</span>
00934 <span class="comment"> *   Third Edition, University of Alberta Press, 1981)                        *</span>
00935 <span class="comment"> *  written by W. B. Joyner 01/07/97                                          *</span>
00936 <span class="comment"> *                                                                            *</span>
00937 <span class="comment"> *  s[j] input = the time series to be filtered                               *</span>
00938 <span class="comment"> *      output = the filtered series                                          *</span>
00939 <span class="comment"> *      dimension of s[j] must be at least as large as                        *</span>
00940 <span class="comment"> *        nd+3.0*float(nroll)/(fcut*delt)                                     *</span>
00941 <span class="comment"> *  nd    = the number of points in the time series                           *</span>
00942 <span class="comment"> *  fcut  = the cutoff frequency                                              *</span>
00943 <span class="comment"> *  delt  = the timestep                                                      *</span>
00944 <span class="comment"> *  nroll = filter order                                                      *</span>
00945 <span class="comment"> *  causal if icaus.eq.1 - zero phase shift otherwise                         *</span>
00946 <span class="comment"> *                                                                            *</span>
00947 <span class="comment"> * The response is given by eq. 15.8-6 in Kanasewich:                         *</span>
00948 <span class="comment"> *  Y = sqrt((f/fcut)**(2*n)/(1+(f/fcut)**(2*n))),                            *</span>
00949 <span class="comment"> *                 where n = 2*nroll                                          *</span>
00950 <span class="comment"> *                                                                            *</span>
00951 <span class="comment"> * Dates: 01/07/97 - Written by Bill Joyner                                   *</span>
00952 <span class="comment"> *        12/17/99 - D. Boore added check for fcut = 0.0, in which case       *</span>
00953 <span class="comment"> *                   no filter is applied.  He also cleaned up the            *</span>
00954 <span class="comment"> *                   appearance of the code (indented statements in           *</span>
00955 <span class="comment"> *                   loops, etc.)                                             *</span>
00956 <span class="comment"> *        02/04/00 - Changed "n" to "nroll" to eliminate confusion with       *</span>
00957 <span class="comment"> *                   Kanesewich, who uses "n" as the order (=2*nroll)         *</span>
00958 <span class="comment"> *        03/01/00 - Ported to C by Jim Luetgert                              *</span>
00959 <span class="comment"> *                                                                            *</span>
00960 <span class="comment"> ******************************************************************************/</span>
<a name="l00961"></a><a class="code" href="k2evt2ew_8c.html#a11">00961</a> <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a11">locut</a>(<span class="keywordtype">float</span> *s, <span class="keywordtype">int</span> nd, <span class="keywordtype">float</span> fcut, <span class="keywordtype">float</span> delt, <span class="keywordtype">int</span> nroll, <span class="keywordtype">int</span> icaus)
00962 {
00963     <span class="keywordtype">float</span>    fact[8], b1[8], b2[8];
00964     <span class="keywordtype">float</span>    pi, w0, w1, w2, w3, w4, w5, xp, yp, x1, x2, y1, y2;
00965     <span class="keywordtype">int</span>       j, k, np2, npad;
00966 
00967     <span class="keywordflow">if</span> (fcut == 0.0) <span class="keywordflow">return</span>;       <span class="comment">/* Added by DMB  */</span>
00968 
00969     pi = 4.0*atan(1.0);
00970     w0 = 2.0*pi*fcut;
00971     w1 = 2.0*tan(w0*delt/2.0);
00972     w2 = (w1/2.0)*(w1/2.0);
00973     w3 = (w1*w1)/2.0 - 2.0;
00974     w4 = 0.25*pi/nroll;
00975 
00976     <span class="keywordflow">for</span>(k=0;k&lt;nroll;k++) {
00977         w5 = w4*(2.0*k + 1.0);
00978         fact[k] = 1.0/(1.0+sin(w5)*w1 + w2);
00979         b1[k] = w3*fact[k];
00980         b2[k] = (1.0-sin(w5)*w1 + w2)*fact[k];
00981     }
00982 
00983     np2 = nd;
00984 
00985     <span class="keywordflow">if</span>(icaus != 1) {
00986         npad = 3.0*nroll/(fcut*delt);
00987         np2 = nd+npad;
00988         <span class="keywordflow">for</span>(j=nd;j&lt;np2;j++) s[j] = 0.0;
00989     }
00990 
00991     <span class="keywordflow">for</span>(k=0;k&lt;nroll;k++) {
00992         x1 = x2 = y1 = y2 = 0.0;
00993         <span class="keywordflow">for</span>(j=0;j&lt;np2;j++) {
00994             xp = s[j];
00995             yp = fact[k]*(xp-2.0*x1+x2) - b1[k]*y1 - b2[k]*y2;
00996             s[j] = yp;
00997             y2 = y1;
00998             y1 = yp;
00999             x2 = x1;
01000             x1 = xp;
01001         }
01002     }
01003 
01004     <span class="keywordflow">if</span>(icaus != 1) {
01005         <span class="keywordflow">for</span>(k=0;k&lt;nroll;k++) {
01006             x1 = x2 = y1 = y2 = 0.0;
01007             <span class="keywordflow">for</span>(j=0;j&lt;np2;j++) {
01008                 xp = s[np2-j-1];
01009                 yp = fact[k]*(xp-2.0*x1+x2) - b1[k]*y1 - b2[k]*y2;
01010                 s[np2-j-1] = yp;
01011                 y2 = y1;
01012                 y1 = yp;
01013                 x2 = x1;
01014                 x1 = xp;
01015             }
01016         }
01017     }
01018 
01019     <span class="keywordflow">return</span>;
01020 }
01021 
01022 
01023 <span class="comment">/******************************************************************************</span>
01024 <span class="comment"> * rdrvaa                                                                     *</span>
01025 <span class="comment"> *                                                                            *</span>
01026 <span class="comment"> * This is a modified version of "Quake.For", originally                      *</span>
01027 <span class="comment"> * written by J.M. Roesset in 1971 and modified by                            *</span>
01028 <span class="comment"> * Stavros A. Anagnostopoulos, Oct. 1986.  The formulation is                 *</span>
01029 <span class="comment"> * that of Nigam and Jennings (BSSA, v. 59, 909-922, 1969).                   *</span>
01030 <span class="comment"> * Dates: 02/11/00 - Modified by David M. Boore, based on RD_CALC             *</span>
01031 <span class="comment"> *        03/01/00 - Ported to C by Jim Luetgert                              *</span>
01032 <span class="comment"> *                                                                            *</span>
01033 <span class="comment"> *   acc = acceleration time series                                           *</span>
01034 <span class="comment"> *    na = length of time series                                              *</span>
01035 <span class="comment"> * omega = 2*pi/per                                                           *</span>
01036 <span class="comment"> *  damp = fractional damping (e.g., 0.05)                                    *</span>
01037 <span class="comment"> *    dt = time spacing of input                                              *</span>
01038 <span class="comment"> *    rd = relative displacement of oscillator                                *</span>
01039 <span class="comment"> *    rv = relative velocity of oscillator                                    *</span>
01040 <span class="comment"> *    aa = absolute acceleration of oscillator                                *</span>
01041 <span class="comment"> ******************************************************************************/</span>
<a name="l01042"></a><a class="code" href="k2evt2ew_8c.html#a12">01042</a> <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a12">rdrvaa</a>(<span class="keywordtype">float</span> *acc, <span class="keywordtype">int</span> na, <span class="keywordtype">float</span> omega, <span class="keywordtype">float</span> damp, <span class="keywordtype">float</span> dt,
01043             <span class="keywordtype">float</span> *rd, <span class="keywordtype">float</span> *rv, <span class="keywordtype">float</span> *aa)
01044 {
01045     <span class="keywordtype">float</span>    omt, d2, bom, d3, omd, om2, omdt, c1, c2, c3, c4, cc, ee;
01046     <span class="keywordtype">float</span>    s1, s2, s3, s4, s5, a11, a12, a21, a22, b11, b12, b21, b22;
01047     <span class="keywordtype">float</span>    y, ydot, y1, z, z1, z2, ra;
01048     <span class="keywordtype">int</span>       i;
01049 
01050     omt  = omega*dt;
01051     d2   = sqrt(1.0-damp*damp);
01052     bom  = damp*omega;
01053     d3   = 2.0*bom;
01054     omd  = omega*d2;
01055     om2  = omega*omega;
01056     omdt = omd*dt;
01057     c1 = 1.0/om2;
01058     c2 = 2.0*damp/(om2*omt);
01059     c3 = c1+c2;
01060     c4 = 1.0/(omega*omt);
01061     ee = exp(-damp*omt);
01062     cc = cos(omdt)*ee;
01063     s1 = sin(omdt)*ee/omd;
01064     s2 = s1*bom;
01065     s3 = s2 + cc;
01066     s4 = c4*(1.0-s3);
01067     s5 = s1*c4 + c2;
01068 
01069     a11 =  s3;          a12 = s1;
01070     a21 = -om2*s1;      a22 = cc - s2;
01071 
01072     b11 =  s3*c3 - s5;  b12 = -c2*s3 + s5 - c1;
01073     b21 = -s1+s4;       b22 = -s4;
01074 
01075     y = ydot = *rd = *rv = *aa = 0.0;
01076     <span class="keywordflow">for</span>(i=0;i&lt;na-1;i++) {
01077         y1   = a11*y + a12*ydot + b11*acc[i] + b12*acc[i+1];
01078         ydot = a21*y + a22*ydot + b21*acc[i] + b22*acc[i+1];
01079         y = y1;    <span class="comment">/* y is the oscillator output at time corresponding to index i   */</span>
01080         z = fabs(y);
01081         <span class="keywordflow">if</span> (z &gt; *rd) *rd = z;
01082         z1 = fabs(ydot);
01083         <span class="keywordflow">if</span> (z1 &gt; *rv) *rv = z1;
01084         ra = -d3*ydot -om2*y1;
01085         z2 = fabs(ra);
01086         <span class="keywordflow">if</span> (z2 &gt; *aa) *aa = z2;
01087     }
01088 }
01089 
01090 <span class="comment">/******************************************************************************</span>
01091 <span class="comment"> *   compute maximum amplitude and its associated period                      *</span>
01092 <span class="comment"> *                                                                            *</span>
01093 <span class="comment"> *   input:                                                                   *</span>
01094 <span class="comment"> *           npts   - number of points in timeseries                          *</span>
01095 <span class="comment"> *           dt     - sample spacing in sec                                   *</span>
01096 <span class="comment"> *           fc     - input timeseries                                        *</span>
01097 <span class="comment"> *   output:                                                                  *</span>
01098 <span class="comment"> *           amaxmm - raw maximum                                             *</span>
01099 <span class="comment"> *           pmax   - period of maximum                                       *</span>
01100 <span class="comment"> *           imax   - index of maxmimum point                                 *</span>
01101 <span class="comment"> *                                                                            *</span>
01102 <span class="comment"> ******************************************************************************/</span>
<a name="l01103"></a><a class="code" href="k2evt2ew_8c.html#a13">01103</a> <span class="keywordtype">void</span> <a class="code" href="k2evt2ew_8c.html#a13">amaxper</a>(<span class="keywordtype">int</span> npts, <span class="keywordtype">float</span> dt, <span class="keywordtype">float</span> *fc, <span class="keywordtype">float</span> *aminmm, <span class="keywordtype">float</span> *amaxmm,
01104                        <span class="keywordtype">float</span> *pmax, <span class="keywordtype">int</span> *imin, <span class="keywordtype">int</span> *imax)
01105 {
01106     <span class="keywordtype">float</span>    amin, amax, pp, pm, mean, frac;
01107     <span class="keywordtype">int</span>       i, j, jmin, jmax;
01108 
01109     *imax = jmax = *imin = jmin = 0;
01110     amax = amin = *amaxmm = *aminmm = fc[0];
01111     *aminmm = *pmax = mean = 0.0;
01112     <span class="keywordflow">for</span>(i=0;i&lt;npts;i++) {
01113         mean = mean + fc[i]/npts;
01114         <span class="keywordflow">if</span> (fc[i] &gt; amax) { jmax = i; amax = fc[i]; }
01115         <span class="keywordflow">if</span> (fc[i] &lt; amin) { jmin = i; amin = fc[i]; }
01116     }
01117 
01118 <span class="comment">/*     compute period of maximum    */</span>
01119 
01120     pp = pm = 0.0;
01121     <span class="keywordflow">if</span> (fc[jmax] &gt; mean) {
01122         j = jmax+1;
01123         <span class="keywordflow">while</span>(fc[j] &gt; mean &amp;&amp; j &lt; npts) {
01124             pp += dt;
01125             j  += 1;
01126         }
01127         frac = dt*(mean-fc[j-1])/(fc[j]-fc[j-1]);
01128         frac = 0.0;
01129         pp = pp + frac;
01130         j = jmax-1;
01131         <span class="keywordflow">while</span>(fc[j] &gt; mean &amp;&amp; j &gt;= 0) {
01132             pm += dt;
01133             j  -= 1;
01134         }
01135         frac = dt*(mean-fc[j+1])/(fc[j]-fc[j+1]);
01136         frac = 0.0;
01137         pm = pm + frac;
01138     } <span class="keywordflow">else</span> {
01139         j = jmax+1;
01140         <span class="keywordflow">if</span>(fc[j] &lt; mean &amp;&amp; j &lt; npts) {
01141             pp += dt;
01142             j  += 1;
01143         }
01144         frac = dt*(mean-fc[j-1])/(fc[j]-fc[j-1]);
01145         frac = 0.0;
01146         pp = pp + frac;
01147         j = jmax-1;
01148         <span class="keywordflow">if</span>(fc[j] &lt; mean &amp;&amp; j &gt;= 0) {
01149             pm += dt;
01150             j  -= 1;
01151         }
01152         frac = dt*(mean-fc[j+1])/(fc[j]-fc[j+1]);
01153         frac = 0.0;
01154         pm = pm + frac;
01155     }
01156 
01157     *imin = jmin;
01158     *imax = jmax;
01159     *pmax = 2.0*(pm+pp);
01160     *aminmm = amin;
01161     *amaxmm = amax;
01162 
01163     <span class="keywordflow">return</span>;
01164 }
01165 
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:03 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
