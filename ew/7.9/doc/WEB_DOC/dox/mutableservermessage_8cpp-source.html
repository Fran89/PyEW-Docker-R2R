<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mutableservermessage.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>mutableservermessage.cpp</h1><a href="mutableservermessage_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// mutableserverresult.cpp: implementation of the MutableServerResult class.</span>
00002 <span class="comment">//</span>
00004 <span class="comment"></span>
00005 <span class="preprocessor">#include "<a class="code" href="mutableservermessage_8h.html">mutableservermessage.h</a>"</span>
00006 
00008 <span class="comment">// Construction/Destruction</span>
00010 <span class="comment"></span>
<a name="l00011"></a><a class="code" href="classMutableServerMessage.html#a0">00011</a> <a class="code" href="classMutableServerMessage.html#a0">MutableServerMessage::MutableServerMessage</a>()
00012 {
00013 }
00014 <span class="comment">//</span>
00015 <span class="comment">// --------------------------------------------------------------------</span>
00016 <span class="comment">//</span>
<a name="l00017"></a><a class="code" href="classMutableServerMessage.html#a1">00017</a> <span class="keywordtype">void</span> <a class="code" href="classMutableServerMessage.html#a1">MutableServerMessage::FormatBuffer</a>()
00018 {
00019    <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.resize(0);
00020    <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.reserve( <a class="code" href="classMutableServerMessage.html#b0">BufferInitAlloc</a>() );
00021    <a class="code" href="classMutableServerMessage.html#b1">FormatDerivativeData</a>();
00022    <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.append( <span class="stringliteral">"\n"</span> );
00023 }
00024 <span class="comment">//</span>
00025 <span class="comment">//-------------------------------------------------------------------</span>
00026 <span class="comment">//</span>
<a name="l00027"></a><a class="code" href="classMutableServerMessage.html#a2">00027</a> <span class="keywordtype">long</span> <a class="code" href="classMutableServerMessage.html#a2">MutableServerMessage::GetBufferLength</a>()<span class="keyword"> const</span>
00028 <span class="keyword"></span>{
00029    <span class="keywordflow">return</span> <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.size();
00030 }
00031 <span class="comment">//</span>
00032 <span class="comment">//-------------------------------------------------------------------</span>
00033 <span class="comment">//</span>
<a name="l00034"></a><a class="code" href="classMutableServerMessage.html#a3">00034</a> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="classMutableServerMessage.html#a3">MutableServerMessage::GetBuffer</a>()<span class="keyword"> const</span>
00035 <span class="keyword"></span>{
00036    <span class="keywordflow">return</span> <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.c_str();
00037 }
00038 <span class="comment">//</span>
00039 <span class="comment">//-------------------------------------------------------------------</span>
00040 <span class="comment">//</span>
<a name="l00041"></a><a class="code" href="classMutableServerMessage.html#a4">00041</a> <span class="keywordtype">bool</span> <a class="code" href="classMutableServerMessage.html#a4">MutableServerMessage::ParseMessageLine</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * p_buffer
00042                                            ,       <span class="keywordtype">bool</span>   p_append_nl   <span class="comment">/* = true  */</span>
00043                                            ,       <span class="keywordtype">bool</span>   p_clearbuffer <span class="comment">/* = false */</span>
00044                                            )
00045 {
00046    <span class="keywordflow">if</span> ( p_buffer == NULL )
00047    {
00048       <span class="keywordflow">throw</span> <a class="code" href="classworm__exception.html">worm_exception</a>(<span class="stringliteral">"MutableServerMessage::ParseMessageLine() Error: buffer parameter NULL"</span>);
00049    }
00050 
00051    <span class="keywordflow">if</span> ( p_clearbuffer )
00052    {
00053       <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.reserve( <a class="code" href="classMutableServerMessage.html#b0">BufferInitAlloc</a>() );
00054       <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a> = <span class="stringliteral">""</span>;
00055    }
00056 
00057    <span class="keywordflow">if</span> ( strlen(p_buffer) == 0 )
00058    {
00059       <span class="keywordflow">if</span> ( p_append_nl )
00060       {
00061          <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.append( <span class="stringliteral">"\n"</span> );
00062       }
00063       <a class="code" href="classMutableServerMessage.html#b2">ParseDerivativeData</a>();
00064       <span class="keywordflow">return</span> <span class="keyword">true</span>;
00065    }
00066    <span class="keywordflow">else</span>
00067    {
00068       <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.append( p_buffer );
00069       <span class="keywordflow">if</span> ( p_append_nl )
00070       {
00071          <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.append( <span class="stringliteral">"\n"</span> );
00072       }
00073       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00074    }
00075 }
00076 <span class="comment">//</span>
00077 <span class="comment">//-------------------------------------------------------------------</span>
00078 <span class="comment">//</span>
<a name="l00079"></a><a class="code" href="classMutableServerMessage.html#a5">00079</a> <span class="keywordtype">void</span> <a class="code" href="classMutableServerMessage.html#a5">MutableServerMessage::ParseFromBuffer</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * p_buffer )
00080 {
00081    <span class="keywordflow">if</span> ( p_buffer == NULL )
00082    {
00083       <span class="keywordflow">throw</span> <a class="code" href="classworm__exception.html">worm_exception</a>(<span class="stringliteral">"MutableServerMessage::ParseFromBuffer() Error: buffer parameter NULL"</span>);
00084    }
00085 
00086    <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a> = p_buffer;
00087    <a class="code" href="classMutableServerMessage.html#n0">MessageBuffer</a>.append( <span class="stringliteral">"\n"</span> );
00088    <a class="code" href="classMutableServerMessage.html#b2">ParseDerivativeData</a>();
00089 }
00090 <span class="comment">//</span>
00091 <span class="comment">// --------------------------------------------------------------------</span>
00092 <span class="comment">//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:06 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
