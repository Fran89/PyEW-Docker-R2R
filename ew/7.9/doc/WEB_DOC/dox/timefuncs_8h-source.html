<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>timefuncs.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>timefuncs.h</h1><a href="timefuncs_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//---------------------------------------------------------------------------</span>
00002 <span class="preprocessor">#ifndef TimeFuncsH</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#define TimeFuncsH</span>
00004 <span class="preprocessor"></span><span class="comment">//---------------------------------------------------------------------------</span>
00005 
00006 <span class="preprocessor">#include &lt;time.h&gt;</span>
00007 <span class="preprocessor">#include &lt;<a class="code" href="worm__statuscode_8h.html">worm_statuscode.h</a>&gt;</span>
00008 
00009 <span class="comment">//---------------------------------------------------------------------------</span>
00010 
<a name="l00011"></a><a class="code" href="timefuncs_8h.html#a14">00011</a> <span class="keyword">enum</span> <a class="code" href="timefuncs_8h.html#a14">WORM_TIME_LOCALE</a>
00012 {
00013     <a class="code" href="timefuncs_8h.html#a14a4">WORM_GMT_TIME</a>
00014   , <a class="code" href="timefuncs_8h.html#a14a5">WORM_LOCAL_TIME</a>
00015 };
00016 
<a name="l00017"></a><a class="code" href="timefuncs_8h.html#a15">00017</a> <span class="keyword">enum</span> <a class="code" href="timefuncs_8h.html#a15">WORM_TIME_FORMAT</a>
00018 {
00019     <a class="code" href="timefuncs_8h.html#a15a6">WORM_TIMEFMT_8</a>     = 0  <span class="comment">// YYYYMMDD</span>
00020   , <a class="code" href="timefuncs_8h.html#a15a7">WORM_TIMEFMT_14</a>    = 1  <span class="comment">// YYYYMMDDhhmmss</span>
00021   , <a class="code" href="timefuncs_8h.html#a15a8">WORM_TIMEFMT_18</a>    = 2  <span class="comment">// YYYYMMDDhhmmss.sss</span>
00022   , <a class="code" href="timefuncs_8h.html#a15a9">WORM_TIMEFMT_UTC21</a> = 3  <span class="comment">// YYYYMMDD_UTC_hh:mm:ss</span>
00023   , <a class="code" href="timefuncs_8h.html#a15a10">WORM_TIMEFMT_16</a>    = 4  <span class="comment">// YYYY/MM/DD hh:mm</span>
00024   , <a class="code" href="timefuncs_8h.html#a15a11">WORM_TIMEFMT_19</a>    = 5  <span class="comment">// YYYY/MM/DD hh:mm:ss</span>
00025   , <a class="code" href="timefuncs_8h.html#a15a12">WORM_TIMEFMT_23</a>    = 6  <span class="comment">// YYYY/MM/DD hh:mm:ss.sss</span>
00026   , <a class="code" href="timefuncs_8h.html#a15a13">WORM_TIMEFMT_26</a>    = 7  <span class="comment">// DOW MON DD HH:MM:SS YYYY\n</span>
00027 };
00028 
<a name="l00029"></a><a class="code" href="timefuncs_8h.html#a0">00029</a> <span class="preprocessor">#define WORM_TIMESTR_LENGTH 26 // max length (with terminator) of above formats</span>
00030 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="timefuncs_8h.html#a1">00031</a> <span class="keyword">typedef</span> <span class="keywordtype">char</span> <a class="code" href="timefuncs_8h.html#a1">WORM_DATETIMESTR</a>[<a class="code" href="timefuncs_8h.html#a0">WORM_TIMESTR_LENGTH</a>];
00032 
<a name="l00033"></a><a class="code" href="timefuncs_8h.html#a2">00033</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="timefuncs_8h.html#a2">ULONG_TIME</a>;
00034 
00035 <span class="comment">//</span>
00036 <span class="comment">//  sec.nano_secs</span>
00037 <span class="comment">//</span>
<a name="l00038"></a><a class="code" href="timefuncs_8h.html#a3">00038</a> <span class="keyword">typedef</span> <span class="keywordtype">double</span> <a class="code" href="timefuncs_8h.html#a3">HIGHRES_TIME</a>;
00039 
00040 
00041 
00042 <span class="comment">//---------------------------------------------------------------------------</span>
<a name="l00043"></a><a class="code" href="classTTimeFuncs.html">00043</a> <span class="keyword">class </span><a class="code" href="classTTimeFuncs.html">TTimeFuncs</a>
00044 {
00045 <span class="keyword">protected</span>:
00046 
00047    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="classTTimeFuncs.html#q0">MONTH_STARTS</a>[2][12];
00048 
00049 <span class="keyword">public</span>:
00050 
00051    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classTTimeFuncs.html#p0">DOW</a>[7][4]; <span class="comment">// = { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };</span>
00052 
00053    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classTTimeFuncs.html#p1">MOY</a>[12][4]; <span class="comment">// = { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };</span>
00054 
00055    <span class="comment">// seconds since Midnight, Jan 1, 1970 with milliseconds as fraction portion</span>
00056    <span class="keyword">static</span> <a class="code" href="timefuncs_8h.html#a3">HIGHRES_TIME</a> <a class="code" href="classTTimeFuncs.html#d0">GetHighResTime</a>();
00057 
00058    <span class="comment">/*  DateString()</span>
00059 <span class="comment">   **</span>
00060 <span class="comment">   **  r_buffer must point to a buffer of at least WORM_TIMESTR_LENGTH length</span>
00061 <span class="comment">   **  Locale defaults to GMT</span>
00062 <span class="comment">   **</span>
00063 <span class="comment">   */</span>
00064    <span class="keyword">static</span> <span class="keywordtype">char</span> * <a class="code" href="classTTimeFuncs.html#d1">DateString</a>( <span class="keywordtype">char</span> * r_buffer
00065                            , WORM_TIME_FORMAT p_format
00066                            , WORM_TIME_LOCALE p_locale = WORM_GMT_TIME
00067                            , <span class="keywordtype">double</span> p_time = -1.0 <span class="comment">// -1.0 means 'now'</span>
00068                            );
00069 
00070    <span class="comment">/*  TimeToDouble -- converts a string in format YYYYMMDDHHMMSS.sss</span>
00071 <span class="comment">   **                  into a double representing seconds since Jan 1, 1970</span>
00072 <span class="comment">   **</span>
00073 <span class="comment">   */</span>
00074    <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classTTimeFuncs.html#d2">TimeToDouble</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * p_buffer );
00075 
00076    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classTTimeFuncs.html#d3">MSecSleep</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p_msec );
00077 
00078    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classTTimeFuncs.html#d4">IsLeapyear</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p_year );
00079 
00080    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classTTimeFuncs.html#d5">YearJulianToMonDay</a>( <span class="keywordtype">short</span>   p_year
00081                                  , <span class="keywordtype">short</span>   p_julday
00082                                  , <span class="keywordtype">short</span> * r_monthnum
00083                                  , <span class="keywordtype">short</span> * r_monthday
00084                                  );
00085 
00086    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classTTimeFuncs.html#d6">CrackDate</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * p_buffer          <span class="comment">// "YYYYMMDD...."</span>
00087                         , <span class="keywordtype">short</span>      * r_year            <span class="comment">// 1900 - n</span>
00088                         , <span class="keywordtype">short</span>      * r_monthnum        <span class="comment">// 1 - 12</span>
00089                         , <span class="keywordtype">short</span>      * r_monthday        <span class="comment">// 1 - 31</span>
00090                         , <span class="keywordtype">short</span>      * r_year2           <span class="comment">// 0 - 99</span>
00091                         , <span class="keywordtype">short</span>      * r_julday   = NULL <span class="comment">// 1 - 366</span>
00092                         , <span class="keywordtype">bool</span>       * r_isleap   = NULL
00093                         );
00094    <span class="comment">// NOTE: a compile error on the NULL can indicate that "#include &lt;string.h&gt;</span>
00095    <span class="comment">//       is needed in the referencing class.</span>
00096 
00097    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classTTimeFuncs.html#d7">CrackTime</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> * p_buffer  <span class="comment">// "HHMMSS.sss" or "........HHMMSS.sss"</span>
00098                         , <span class="keywordtype">short</span>      * p_hour
00099                         , <span class="keywordtype">short</span>      * p_min
00100                         , <span class="keywordtype">short</span>      * p_sec    = NULL
00101                         , <span class="keywordtype">short</span>      * p_msec   = NULL
00102                         , <span class="keywordtype">double</span>     * p_fpsec  = NULL
00103                         );
00104 };
00105 
00106 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:11 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
