<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>rw_strongmotionII.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>rw_strongmotionII.h</h1><a href="rw__strongmotionII_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> *   THIS FILE IS UNDER RCS - DO NOT MODIFY UNLESS YOU HAVE</span>
00003 <span class="comment"> *   CHECKED IT OUT USING THE COMMAND CHECKOUT.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> *    $Id: rw__strongmotionII_8h-source.html 2161 2006-05-19 16:55:03Z paulf $</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> *    Revision history:</span>
00008 <span class="comment"> *     $Log$
00008 <span class="comment"> *     Revision 1.1  2006/05/19 16:55:02  paulf
00008 <span class="comment"> *     first inclusion
00008 <span class="comment"> *</span>
00009 <span class="comment"> *     Revision 1.3  2001/08/02 23:22:50  davidk</span>
00010 <span class="comment"> *     corrected a couple of comments.</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> *     Revision 1.2  2001/04/06 17:22:52  davidk</span>
00013 <span class="comment"> *     Added formatted comments to the file.  Added additional doucmentation.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *     Revision 1.1  2001/04/06 17:16:06  davidk</span>
00016 <span class="comment"> *     Initial revision</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> */</span>
00021 
00022 <span class="comment">/************************************************</span>
00023 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00024 <span class="comment">EW API FORMATTED COMMENT</span>
00025 <span class="comment">TYPE LIBRARY</span>
00026 <span class="comment"></span>
00027 <span class="comment">LIBRARY EW_LIBSRC</span>
00028 <span class="comment"></span>
00029 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00030 <span class="comment"></span>
00031 <span class="comment">LOCATION THIS_FILE</span>
00032 <span class="comment"></span>
00033 <span class="comment">DESCRIPTION  Library for converting converting from an </span>
00034 <span class="comment">Earthworm TYPE_STRONGMOTION2 message to a structure and visa versa.</span>
00035 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00036 <span class="comment">Each TYPE_STRONGMOTION2 message is intended to contain information for</span>
00037 <span class="comment">one channel only, with optional event association information.</span>
00038 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00039 <span class="comment">Field units with multiple channels will produce multiple </span>
00040 <span class="comment">TYPE_STRONGMOTION2 messages.</span>
00041 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00042 <span class="comment">Timestamps are in seconds since 1970/01/01 00:00:00.00 UTC.</span>
00043 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00044 <span class="comment">Data are in units of cgs. (centimeters, grams, seconds)</span>
00045 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00046 <span class="comment">&lt;b&gt;WARNING!&lt;/b&gt; All measurements in the Earthworm TYPE_STRONGMOTION2</span>
00047 <span class="comment">message are assumed to be positive.  SM_NULL indicates that </span>
00048 <span class="comment">a measurement is missing, and any other negative value </span>
00049 <span class="comment">will result in unpredictable behavior from strong motion </span>
00050 <span class="comment">applications.  If you have sources that may produce signed</span>
00051 <span class="comment">values for PGA, PGV, PGD, or RSA values, you must be sure to </span>
00052 <span class="comment">change these to absolute values before they are passed to this</span>
00053 <span class="comment">library!</span>
00054 <span class="comment">&lt;br&gt;</span>
00055 <span class="comment">Written by Lynn Dietz,   January 2001</span>
00056 <span class="comment">&lt;br&gt;&lt;br&gt;</span>
00057 <span class="comment"></span>
00058 <span class="comment">*************************************************</span>
00059 <span class="comment">************************************************/</span>
00060 
00061 
00062 <span class="comment">/* rw_strongmotionII.h</span>
00063 <span class="comment"> *</span>
00064 <span class="comment"> * Header file for the functions in rw_strongmotionII.c that</span>
00065 <span class="comment"> * convert from a TYPE_STRONGMOTION2 message to a structure </span>
00066 <span class="comment"> * and visa versa.</span>
00067 <span class="comment"> * </span>
00068 <span class="comment"> * Each TYPE_STRONGMOTION2 message is intended to contain information</span>
00069 <span class="comment"> * one channel only, with optional event association information.</span>
00070 <span class="comment"> * Field units with multiple channels will produce multiple </span>
00071 <span class="comment"> * TYPE_STRONGMOTION2 messages.</span>
00072 <span class="comment"> *</span>
00073 <span class="comment"> * Timestamps are in seconds since 1970/01/01 00:00:00.00 UTC.</span>
00074 <span class="comment"> *</span>
00075 <span class="comment"> * Data are in units of cgs.</span>
00076 <span class="comment"> *</span>
00077 <span class="comment"> * written by Lynn Dietz   January 2001</span>
00078 <span class="comment"> */</span>
00079 
00080 <span class="preprocessor">#ifndef RW_STRONGMOTION_II_H</span>
00081 <span class="preprocessor"></span><span class="preprocessor">#define RW_STRONGMOTION_II_H</span>
00082 <span class="preprocessor"></span>
00083 <span class="preprocessor">#include &lt;<a class="code" href="earthworm_8h.html">earthworm.h</a>&gt;</span>
00084 <span class="comment">/*</span>
00085 <span class="comment">#include &lt;earthworm_defs.h&gt;</span>
00086 <span class="comment">#include &lt;earthworm_simple_funcs.h&gt;</span>
00087 <span class="comment">*/</span>
00088 
00089 <span class="preprocessor">#include &lt;<a class="code" href="trace__buf_8h.html">trace_buf.h</a>&gt;</span>
00090 
00091 <span class="comment">/* Useful constants</span>
00092 <span class="comment"> *******************/</span>
00093 <span class="comment">/************************************************</span>
00094 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00095 <span class="comment">EW5 API FORMATTED COMMENT</span>
00096 <span class="comment">TYPE DEFINE </span>
00097 <span class="comment"></span>
00098 <span class="comment">LIBRARY EW_LIBSRC</span>
00099 <span class="comment"></span>
00100 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00101 <span class="comment"></span>
00102 <span class="comment">LANGUAGE C</span>
00103 <span class="comment"></span>
00104 <span class="comment">LOCATION THIS_FILE</span>
00105 <span class="comment"></span>
00106 <span class="comment">CONSTANT_GROUP Scientific Constants</span>
00107 <span class="comment"></span>
00108 <span class="comment">CONSTANT GRAVITY_CGS</span>
00109 <span class="comment">VALUE 978.03</span>
00110 <span class="comment">DESCRIPTION Gravity(g) in cm/sec/sec</span>
00111 <span class="comment"></span>
00112 <span class="comment">*************************************************</span>
00113 <span class="comment">************************************************/</span>
<a name="l00114"></a><a class="code" href="rw__strongmotionII_8h.html#a0">00114</a> <span class="preprocessor">#define GRAVITY_CGS 978.03    </span><span class="comment">/* Gravity in cm/sec/sec */</span>
00115 
00116 <span class="comment">/* Define maximum lengths for strings/arrays </span>
00117 <span class="comment">   in and Earthworm TYPE_STRONGMOTION2 message</span>
00118 <span class="comment"> *********************************************/</span>
00119 
00120 <span class="comment">/************************************************</span>
00121 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00122 <span class="comment">EW5 API FORMATTED COMMENT</span>
00123 <span class="comment">TYPE DEFINE </span>
00124 <span class="comment"></span>
00125 <span class="comment">LIBRARY EW_LIBSRC</span>
00126 <span class="comment"></span>
00127 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00128 <span class="comment"></span>
00129 <span class="comment">LANGUAGE C</span>
00130 <span class="comment"></span>
00131 <span class="comment">LOCATION THIS_FILE</span>
00132 <span class="comment"></span>
00133 <span class="comment">CONSTANT_GROUP Strong Motion Message Constants</span>
00134 <span class="comment"></span>
00135 <span class="comment">CONSTANT SM_MAX_RSA</span>
00136 <span class="comment">VALUE 20</span>
00137 <span class="comment">DESCRIPTION Maximum number of spectral values for</span>
00138 <span class="comment">a given message.</span>
00139 <span class="comment"></span>
00140 <span class="comment">CONSTANT SM_NULL</span>
00141 <span class="comment">VALUE -1</span>
00142 <span class="comment">DESCRIPTION NULL value for PGA, PGV, and PGD measurments.</span>
00143 <span class="comment">If any of the peak measurments for a message are not</span>
00144 <span class="comment">available, use SM_NULL in there place to indicate so.</span>
00145 <span class="comment">All measurements in the Earthworm TYPE_STRONGMOTION2</span>
00146 <span class="comment">message are assumed to be positive.  SM_NULL indicates that </span>
00147 <span class="comment">a measurement is missing, and any other negative value </span>
00148 <span class="comment">will result in unpredictable behavior from strong motion </span>
00149 <span class="comment">applications.</span>
00150 <span class="comment"></span>
00151 <span class="comment">*************************************************</span>
00152 <span class="comment">************************************************/</span>
<a name="l00153"></a><a class="code" href="rw__strongmotionII_8h.html#a1">00153</a> <span class="preprocessor">#define SM_MAX_RSA    20      </span><span class="comment">/* max # spectral values for a given channel */</span>
<a name="l00154"></a><a class="code" href="rw__strongmotionII_8h.html#a2">00154</a> <span class="preprocessor">#define SM_NULL       -1      </span><span class="comment">/* null value for period &amp; RSA               */</span>
00155 
00156 
00157 <span class="comment">/************************************************</span>
00158 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00159 <span class="comment">EW5 API FORMATTED COMMENT</span>
00160 <span class="comment">TYPE DEFINE </span>
00161 <span class="comment"></span>
00162 <span class="comment">LIBRARY EW_LIBSRC</span>
00163 <span class="comment"></span>
00164 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00165 <span class="comment"></span>
00166 <span class="comment">LANGUAGE C</span>
00167 <span class="comment"></span>
00168 <span class="comment">LOCATION THIS_FILE</span>
00169 <span class="comment"></span>
00170 <span class="comment">CONSTANT_GROUP Strong Motion Alternate Time Codes</span>
00171 <span class="comment"></span>
00172 <span class="comment">CONSTANT SM_ALTCODE_NONE</span>
00173 <span class="comment">VALUE 0</span>
00174 <span class="comment">DESCRIPTION Code for no alternate time.</span>
00175 <span class="comment"></span>
00176 <span class="comment">CONSTANT SM_ALTCODE_RECEIVING_MODULE</span>
00177 <span class="comment">VALUE 1</span>
00178 <span class="comment">DESCRIPTION Code for an alternate time derived by</span>
00179 <span class="comment">a program module that receives a message from a</span>
00180 <span class="comment">box in the field.</span>
00181 <span class="comment"></span>
00182 <span class="comment">CONSTANT SM_ALTCODE_DATABASE</span>
00183 <span class="comment">VALUE 2</span>
00184 <span class="comment">DESCRIPTION Code for an alternate time derived by</span>
00185 <span class="comment">the database or strong motion database insertion module.</span>
00186 <span class="comment"></span>
00187 <span class="comment">CONSTANT SM_ALTCODE_AUTOMATED_REVIEWER</span>
00188 <span class="comment">VALUE 3</span>
00189 <span class="comment">DESCRIPTION Code for an alternate time derived by</span>
00190 <span class="comment">a Human (who has hopefully reviewed the data).</span>
00191 <span class="comment"></span>
00192 <span class="comment">*************************************************</span>
00193 <span class="comment">************************************************/</span>
00194 <span class="comment">/* Sources for the alternate time in the SM_DATA structure</span>
00195 <span class="comment"> *********************************************************/</span>
<a name="l00196"></a><a class="code" href="rw__strongmotionII_8h.html#a3">00196</a> <span class="preprocessor">#define SM_ALTCODE_NONE                0</span>
<a name="l00197"></a><a class="code" href="rw__strongmotionII_8h.html#a4">00197</a> <span class="preprocessor"></span><span class="preprocessor">#define SM_ALTCODE_RECEIVING_MODULE    1</span>
<a name="l00198"></a><a class="code" href="rw__strongmotionII_8h.html#a5">00198</a> <span class="preprocessor"></span><span class="preprocessor">#define SM_ALTCODE_DATABASE            2</span>
<a name="l00199"></a><a class="code" href="rw__strongmotionII_8h.html#a6">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define SM_ALTCODE_AUTOMATED_REVIEWER  3</span>
<a name="l00200"></a><a class="code" href="rw__strongmotionII_8h.html#a7">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define SM_ALTCODE_HUMAN_REVIEWER      4</span>
00201 <span class="preprocessor"></span>
00202 
00203 <span class="comment">/************************************************</span>
00204 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00205 <span class="comment">EW5 API FORMATTED COMMENT</span>
00206 <span class="comment">TYPE TYPEDEF </span>
00207 <span class="comment"></span>
00208 <span class="comment">LIBRARY EW_LIBSRC</span>
00209 <span class="comment"></span>
00210 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00211 <span class="comment"></span>
00212 <span class="comment">LANGUAGE C</span>
00213 <span class="comment"></span>
00214 <span class="comment">LOCATION THIS_FILE</span>
00215 <span class="comment"></span>
00216 <span class="comment">TYPEDEF SM_INFO</span>
00217 <span class="comment">TYPE_DEFINITION struct _SM_INFO</span>
00218 <span class="comment">DESCRIPTION Structure that contains data for a </span>
00219 <span class="comment">single strong motion message.  This structure</span>
00220 <span class="comment">is equivalent to the binary form of a strong</span>
00221 <span class="comment">motion message(without a MSG_LOGO).</span>
00222 <span class="comment"></span>
00223 <span class="comment">MEMBER sta</span>
00224 <span class="comment">MEMBER_TYPE char[TRACE_STA_LEN]</span>
00225 <span class="comment">MEMBER_DESCRIPTION NTS, Site code as per IRIS SEED.</span>
00226 <span class="comment"></span>
00227 <span class="comment">MEMBER comp</span>
00228 <span class="comment">MEMBER_TYPE char[TRACE_CHAN_LEN]</span>
00229 <span class="comment">MEMBER_DESCRIPTION NTS, Component code as per IRIS SEED.</span>
00230 <span class="comment"></span>
00231 <span class="comment">MEMBER net</span>
00232 <span class="comment">MEMBER_TYPE char[TRACE_NET_LEN]</span>
00233 <span class="comment">MEMBER_DESCRIPTION NTS, Network code as per IRIS SEED.</span>
00234 <span class="comment"></span>
00235 <span class="comment">MEMBER loc</span>
00236 <span class="comment">MEMBER_TYPE char[TRACE_LOC_LEN]</span>
00237 <span class="comment">MEMBER_DESCRIPTION NTS, Location code as per IRIS SEED.</span>
00238 <span class="comment"></span>
00239 <span class="comment">MEMBER qid</span>
00240 <span class="comment">MEMBER_TYPE char[EVENTID_SIZE]</span>
00241 <span class="comment">MEMBER_DESCRIPTION EventId that the message is associated</span>
00242 <span class="comment">with.  This EventID is the one specified by qAuthor.</span>
00243 <span class="comment"></span>
00244 <span class="comment">MEMBER qauthor</span>
00245 <span class="comment">MEMBER_TYPE char[AUTHOR_FIELD_SIZE]</span>
00246 <span class="comment">MEMBER_DESCRIPTION Author of an event with which this </span>
00247 <span class="comment">message is associated.  The author assigns the qid.</span>
00248 <span class="comment"></span>
00249 <span class="comment">MEMBER t</span>
00250 <span class="comment">MEMBER_TYPE double</span>
00251 <span class="comment">MEMBER_DESCRIPTION The main timestamp for the message.  If the</span>
00252 <span class="comment">message came from an SM box in the field, then this is the trigger</span>
00253 <span class="comment">time reported by the box.  If the message came from a module processing</span>
00254 <span class="comment">continuous telemetry, then this is the pick time or earlies of PGA, PGV,</span>
00255 <span class="comment">or PGD time.   (seconds since 1970/01/01 00:00:00.00)</span>
00256 <span class="comment"></span>
00257 <span class="comment">MEMBER talt</span>
00258 <span class="comment">MEMBER_TYPE double</span>
00259 <span class="comment">MEMBER_DESCRIPTION (Optional) Alternate timestamp for the message.  </span>
00260 <span class="comment">This param is provided as a sanity check or correction of the </span>
00261 <span class="comment">main timestamp(t).  This timestamp could be assigned by an acquisition </span>
00262 <span class="comment">module, database loader, human, or other.  The author type of this </span>
00263 <span class="comment">timestamp is determined by altcode(see below).  </span>
00264 <span class="comment">(seconds since 1970/01/01 00:00:00.00)</span>
00265 <span class="comment"></span>
00266 <span class="comment">MEMBER altcode</span>
00267 <span class="comment">MEMBER_TYPE int</span>
00268 <span class="comment">MEMBER_DESCRIPTION (Required if talt is specified.) </span>
00269 <span class="comment">Code specifying the source of the alternate time field(talt).</span>
00270 <span class="comment">See SM_ALTCODE_NONE for a list of recognized source codes.</span>
00271 <span class="comment"></span>
00272 <span class="comment">MEMBER pga</span>
00273 <span class="comment">MEMBER_TYPE double</span>
00274 <span class="comment">MEMBER_DESCRIPTION The Peak Ground Acceleration(PGA) for this </span>
00275 <span class="comment">message.  (cm/s/s)</span>
00276 <span class="comment"></span>
00277 <span class="comment">MEMBER tpga</span>
00278 <span class="comment">MEMBER_TYPE double</span>
00279 <span class="comment">MEMBER_DESCRIPTION Time of the pga.  (seconds since 1970)</span>
00280 <span class="comment"></span>
00281 <span class="comment">MEMBER pgv</span>
00282 <span class="comment">MEMBER_TYPE double</span>
00283 <span class="comment">MEMBER_DESCRIPTION The Peak Ground Velocity(PGV) for this </span>
00284 <span class="comment">message. (cm/s)</span>
00285 <span class="comment"></span>
00286 <span class="comment">MEMBER tpgv</span>
00287 <span class="comment">MEMBER_TYPE double</span>
00288 <span class="comment">MEMBER_DESCRIPTION Time of the pgv.  (seconds since 1970)</span>
00289 <span class="comment"></span>
00290 <span class="comment">MEMBER pgd</span>
00291 <span class="comment">MEMBER_TYPE double</span>
00292 <span class="comment">MEMBER_DESCRIPTION The Peak Ground Displacement(PGD) for this </span>
00293 <span class="comment">message.  (cm)</span>
00294 <span class="comment"></span>
00295 <span class="comment">MEMBER tpgd</span>
00296 <span class="comment">MEMBER_TYPE double</span>
00297 <span class="comment">MEMBER_DESCRIPTION Time of the pgd.  (seconds since 1970)</span>
00298 <span class="comment"></span>
00299 <span class="comment">MEMBER nrsa</span>
00300 <span class="comment">MEMBER_TYPE int</span>
00301 <span class="comment">MEMBER_DESCRIPTION Number of response spectrum accel(RSA) pairs.</span>
00302 <span class="comment">Valid value range is (0 - SM_MAX_RSA).</span>
00303 <span class="comment"></span>
00304 <span class="comment">MEMBER pdrsa</span>
00305 <span class="comment">MEMBER_TYPE double[SM_MAX_RSA]</span>
00306 <span class="comment">MEMBER_DESCRIPTION Period(s) at which RSA values are given.</span>
00307 <span class="comment"></span>
00308 <span class="comment">MEMBER rsa</span>
00309 <span class="comment">MEMBER_TYPE double[SM_MAX_RSA]</span>
00310 <span class="comment">MEMBER_DESCRIPTION RSA value for each given period. (cm/s/s)</span>
00311 <span class="comment"></span>
00312 <span class="comment">MEMBER tload</span>
00313 <span class="comment">MEMBER_TYPE double</span>
00314 <span class="comment">MEMBER_DESCRIPTION Time the message was first loaded into an</span>
00315 <span class="comment">Earthworm DB.  (seconds since 1970)  NOTE:  This field is </span>
00316 <span class="comment">not part of ascii TYPE_STRONGMOTIONII msg, but may be filled </span>
00317 <span class="comment">when pulling data from DBMS.</span>
00318 <span class="comment"></span>
00319 <span class="comment">NOTE NTS when used above refers to (NULL Terminated String).</span>
00320 <span class="comment"></span>
00321 <span class="comment">*************************************************</span>
00322 <span class="comment">************************************************/</span>
00323 <span class="comment">/* Structure to contain strongmotion data from one channel</span>
00324 <span class="comment">   In the comments below, NTS = Null Terminated String</span>
00325 <span class="comment"> *********************************************************/</span>
<a name="l00326"></a><a class="code" href="struct__SM__INFO.html">00326</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__SM__INFO.html">_SM_INFO</a> {
00327 
00328 <span class="comment">/* fields supplied in TYPE_STRONGMOTION2 msg */</span>
<a name="l00329"></a><a class="code" href="struct__SM__INFO.html#m0">00329</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m0">sta</a>[<a class="code" href="trace__buf_8h.html#a1">TRACE_STA_LEN</a>];   <span class="comment">/* REQUIRED: NTS, Site code as per IRIS SEED      */</span>  
<a name="l00330"></a><a class="code" href="struct__SM__INFO.html#m1">00330</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m1">comp</a>[<a class="code" href="trace__buf_8h.html#a2">TRACE_CHAN_LEN</a>]; <span class="comment">/* REQUIRED: NTS, Component code as per IRIS SEED */</span>  
<a name="l00331"></a><a class="code" href="struct__SM__INFO.html#m2">00331</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m2">net</a>[<a class="code" href="trace__buf_8h.html#a3">TRACE_NET_LEN</a>];   <span class="comment">/* REQUIRED: NTS, Network code as per IRIS SEED   */</span>
<a name="l00332"></a><a class="code" href="struct__SM__INFO.html#m3">00332</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m3">loc</a>[<a class="code" href="trace__buf_8h.html#a4">TRACE_LOC_LEN</a>];   <span class="comment">/* OPTIONAL: NTS, Location code as per IRIS SEED  */</span>
<a name="l00333"></a><a class="code" href="struct__SM__INFO.html#m4">00333</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m4">qid</a>[<a class="code" href="earthworm__defs_8h.html#a18">EVENTID_SIZE</a>];    <span class="comment">/* OPTIONAL: NTS, eventid data associates with    */</span>
<a name="l00334"></a><a class="code" href="struct__SM__INFO.html#m5">00334</a>    <span class="keywordtype">char</span>    <a class="code" href="struct__SM__INFO.html#m5">qauthor</a>[<a class="code" href="earthworm__defs_8h.html#a17">AUTHOR_FIELD_SIZE</a>];  <span class="comment">/* OPTIONAL: NTS, author of the eventid    */</span>
00335                                  <span class="comment">/*   (required if qid is given)                   */</span>
<a name="l00336"></a><a class="code" href="struct__SM__INFO.html#m6">00336</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m6">t</a>;                    <span class="comment">/* REQUIRED: time: trigger reported by SM box,    */</span>
00337                                  <span class="comment">/*   or pick time from continuous telemetry,      */</span>
00338                                  <span class="comment">/*   or earliest of tpga, tpgv, tpgd              */</span>
00339                                  <span class="comment">/*   (seconds since 1970/01/01 00:00:00.00)       */</span>
<a name="l00340"></a><a class="code" href="struct__SM__INFO.html#m7">00340</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m7">talt</a>;                 <span class="comment">/* OPTIONAL: alternate time, reported by          */</span>
00341                                  <span class="comment">/*   nobody, acq. software, analyst, etc.         */</span>
<a name="l00342"></a><a class="code" href="struct__SM__INFO.html#m8">00342</a>    <span class="keywordtype">int</span>     <a class="code" href="struct__SM__INFO.html#m8">altcode</a>;              <span class="comment">/* OPTIONAL: code specifying the source of        */</span>
00343                                  <span class="comment">/*   the alternate time field                     */</span>
<a name="l00344"></a><a class="code" href="struct__SM__INFO.html#m9">00344</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m9">pga</a>;                  <span class="comment">/* REQUIRED: peak ground acceleration (cm/s/s)    */</span>
<a name="l00345"></a><a class="code" href="struct__SM__INFO.html#m10">00345</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m10">tpga</a>;                 <span class="comment">/* OPTIONAL: time of pga                          */</span>
<a name="l00346"></a><a class="code" href="struct__SM__INFO.html#m11">00346</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m11">pgv</a>;                  <span class="comment">/* REQUIRED: peak ground velocity (cm/s)          */</span>
<a name="l00347"></a><a class="code" href="struct__SM__INFO.html#m12">00347</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m12">tpgv</a>;                 <span class="comment">/* OPTIONAL: time of pgv                          */</span>
<a name="l00348"></a><a class="code" href="struct__SM__INFO.html#m13">00348</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m13">pgd</a>;                  <span class="comment">/* REQUIRED: peak ground displacement (cm)        */</span>
<a name="l00349"></a><a class="code" href="struct__SM__INFO.html#m14">00349</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m14">tpgd</a>;                 <span class="comment">/* OPTIONAL: time of pgd                          */</span>
<a name="l00350"></a><a class="code" href="struct__SM__INFO.html#m15">00350</a>    <span class="keywordtype">int</span>     <a class="code" href="struct__SM__INFO.html#m15">nrsa</a>;                 <span class="comment">/* REQUIRED: # response spectrum accel (RSA) pairs*/</span>
00351                                  <span class="comment">/*   Valid range for nrsa is 0 to SM_MAX_RSA      */</span>
<a name="l00352"></a><a class="code" href="struct__SM__INFO.html#m16">00352</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m16">pdrsa</a>[<a class="code" href="rw__strongmotion_8h.html#a7">SM_MAX_RSA</a>];    <span class="comment">/* period (s) at which RSA values are given       */</span>
<a name="l00353"></a><a class="code" href="struct__SM__INFO.html#m17">00353</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m17">rsa</a>[<a class="code" href="rw__strongmotion_8h.html#a7">SM_MAX_RSA</a>];      <span class="comment">/* RSA value (cm/s/s) at given period             */</span> 
00354 
00355 <span class="comment">/* fields supplied by DBMS: */</span>
<a name="l00356"></a><a class="code" href="struct__SM__INFO.html#m18">00356</a>    <span class="keywordtype">double</span>  <a class="code" href="struct__SM__INFO.html#m18">tload</a>;                <span class="comment">/* time data was loaded into DBMS - this field is */</span>
00357                                  <span class="comment">/*   not part of ascii TYPE_STRONGMOTIONII msg,   */</span>
00358                                  <span class="comment">/*   but may be filled when pulling data from DBMS*/</span>
00359 } <a class="code" href="struct__SM__INFO.html">SM_INFO</a>;
00360 
00361 
00362 
00363 <span class="comment">/* Function Prototypes</span>
00364 <span class="comment"> *********************/</span>
00365 
00366 <span class="comment">/************************************************</span>
00367 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00368 <span class="comment">EW5 API FORMATTED COMMENT</span>
00369 <span class="comment">TYPE FUNCTION_PROTOTYPE</span>
00370 <span class="comment"></span>
00371 <span class="comment">LIBRARY EW_LIBSRC</span>
00372 <span class="comment"></span>
00373 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00374 <span class="comment"></span>
00375 <span class="comment">LANGUAGE C</span>
00376 <span class="comment"></span>
00377 <span class="comment">LOCATION THIS_FILE</span>
00378 <span class="comment"></span>
00379 <span class="comment">FUNCTION rd_strongmotionII</span>
00380 <span class="comment"></span>
00381 <span class="comment">SOURCE_LOCATION src/libsrc/util/rw_strongmotionII.c</span>
00382 <span class="comment"></span>
00383 <span class="comment">RETURN_TYPE int </span>
00384 <span class="comment"></span>
00385 <span class="comment">RETURN_VALUE 0</span>
00386 <span class="comment">RETURN_DESCRIPTION Success.</span>
00387 <span class="comment"></span>
00388 <span class="comment">RETURN_VALUE -1</span>
00389 <span class="comment">RETURN_DESCRIPTION Failure.  See logfile for details.</span>
00390 <span class="comment"></span>
00391 <span class="comment"></span>
00392 <span class="comment">PARAMETER 1</span>
00393 <span class="comment">PARAM_NAME msg</span>
00394 <span class="comment">PARAM_TYPE char *</span>
00395 <span class="comment">PARAM_DESCRIPTION  The strong motion message.  The first line</span>
00396 <span class="comment">of the message should be the SCNL line.</span>
00397 <span class="comment"></span>
00398 <span class="comment">PARAMETER 2</span>
00399 <span class="comment">PARAM_NAME msglen</span>
00400 <span class="comment">PARAM_TYPE int </span>
00401 <span class="comment">PARAM_DESCRIPTION  The length of the msg in bytes.</span>
00402 <span class="comment"></span>
00403 <span class="comment">PARAMETER 3</span>
00404 <span class="comment">PARAM_NAME sm</span>
00405 <span class="comment">PARAM_TYPE SM_INFO * </span>
00406 <span class="comment">PARAM_DESCRIPTION  A pointer to an SM_INFO struct allocated</span>
00407 <span class="comment">by the caller, where the function will result the SM_INFO</span>
00408 <span class="comment">struct derived from the message.</span>
00409 <span class="comment"></span>
00410 <span class="comment"></span>
00411 <span class="comment">DESCRIPTION This function reads an ascii TYPE_STRONGMOTION2 </span>
00412 <span class="comment">message and fills in a SM_INFO structure.  It returns 0 on success,</span>
00413 <span class="comment">-1 on failure.</span>
00414 <span class="comment"></span>
00415 <span class="comment">NOTE  Example of a TYPE_STRONGMOTION2 message.</span>
00416 <span class="comment">&lt;br&gt;&lt;br&gt;&lt;font size=-1 face=monospace&gt;</span>
00417 <span class="comment">SCNL: CMB.BHZ.BK.                                   &lt;br&gt;</span>
00418 <span class="comment">TIME: 2001/02/25 02:37:00.000                       &lt;br&gt;</span>
00419 <span class="comment">ALT:  2001/02/25 02:40:40.000 CODE: 1               &lt;br&gt;</span>
00420 <span class="comment">PGA: 6.846210 TPGA: 2001/02/25 02:37:00.000         &lt;br&gt;</span>
00421 <span class="comment">PGV: 0.140000 TPGV: 2001/02/25 02:37:00.000         &lt;br&gt;</span>
00422 <span class="comment">PGD: 0.000000 TPGD: 2001/02/25 02:37:00.000         &lt;br&gt;</span>
00423 <span class="comment">RSA: 3/0.30 4.415404/1.00 0.925639/3.00 0.297907    &lt;br&gt; </span>
00424 <span class="comment">QID: 41059467 014024003:UCB                         &lt;br&gt;   </span>
00425 <span class="comment">&lt;/b&gt;&lt;/font&gt;</span>
00426 <span class="comment"></span>
00427 <span class="comment">*************************************************</span>
00428 <span class="comment">************************************************/</span>
00429 <span class="keywordtype">int</span>  <a class="code" href="rw__strongmotionII_8c.html#a8">rd_strongmotionII</a>( <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> msglen, <a class="code" href="struct__SM__INFO.html">SM_INFO</a> *sm );
00430 
00431 <span class="comment">/************************************************</span>
00432 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00433 <span class="comment">EW5 API FORMATTED COMMENT</span>
00434 <span class="comment">TYPE FUNCTION_PROTOTYPE</span>
00435 <span class="comment"></span>
00436 <span class="comment">LIBRARY EW_LIBSRC</span>
00437 <span class="comment"></span>
00438 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00439 <span class="comment"></span>
00440 <span class="comment">LANGUAGE C</span>
00441 <span class="comment"></span>
00442 <span class="comment">LOCATION THIS_FILE</span>
00443 <span class="comment"></span>
00444 <span class="comment">FUNCTION wr_strongmotionII</span>
00445 <span class="comment"></span>
00446 <span class="comment">SOURCE_LOCATION src/libsrc/util/rw_strongmotionII.c</span>
00447 <span class="comment"></span>
00448 <span class="comment">RETURN_TYPE int </span>
00449 <span class="comment"></span>
00450 <span class="comment">RETURN_VALUE 0</span>
00451 <span class="comment">RETURN_DESCRIPTION Success.</span>
00452 <span class="comment"></span>
00453 <span class="comment">RETURN_VALUE -1</span>
00454 <span class="comment">RETURN_DESCRIPTION Failure.  This is caused by a </span>
00455 <span class="comment">buffer overflow, where the caller's buffer was too</span>
00456 <span class="comment">small to hold the entire message generated by the </span>
00457 <span class="comment">function.  If the caller believes their buffer should</span>
00458 <span class="comment">be adequately large, then one or more of the strings</span>
00459 <span class="comment">in the SM_INFO struct may not be properly terminated.</span>
00460 <span class="comment"></span>
00461 <span class="comment"></span>
00462 <span class="comment">PARAMETER 1</span>
00463 <span class="comment">PARAM_NAME sm</span>
00464 <span class="comment">PARAM_TYPE SM_INFO *</span>
00465 <span class="comment">PARAM_DESCRIPTION  Pointer to an SM_INFO struct that the</span>
00466 <span class="comment">function will read to get the information for the </span>
00467 <span class="comment">TYPE_STRONGMOTION2 message.</span>
00468 <span class="comment"></span>
00469 <span class="comment">PARAMETER 2</span>
00470 <span class="comment">PARAM_NAME buf</span>
00471 <span class="comment">PARAM_TYPE char *</span>
00472 <span class="comment">PARAM_DESCRIPTION  Pointer to a buffer allocated by the caller</span>
00473 <span class="comment">where the function will write the TYPE_STRONGMOTION2 message.</span>
00474 <span class="comment"></span>
00475 <span class="comment">PARAMETER 3</span>
00476 <span class="comment">PARAM_NAME buflen</span>
00477 <span class="comment">PARAM_TYPE int </span>
00478 <span class="comment">PARAM_DESCRIPTION  The length of the caller's buffer(buf) in bytes.</span>
00479 <span class="comment"></span>
00480 <span class="comment"></span>
00481 <span class="comment">DESCRIPTION Reads a SM_INFO structure and writes an ascii </span>
00482 <span class="comment">TYPE_STRONGMOTION2 message (null terminated). It returns </span>
00483 <span class="comment">0 on success, and -1 on failure.  See rd_strongmotion for</span>
00484 <span class="comment">an example of a TYPE_STRONGMOTION2 message.</span>
00485 <span class="comment"></span>
00486 <span class="comment">*************************************************</span>
00487 <span class="comment">************************************************/</span>
00488 <span class="keywordtype">int</span>  <a class="code" href="rw__strongmotionII_8c.html#a9">wr_strongmotionII</a>( <a class="code" href="struct__SM__INFO.html">SM_INFO</a> *sm, <span class="keywordtype">char</span> *buf, <span class="keywordtype">int</span> buflen );
00489 
00490 <span class="comment">/************************************************</span>
00491 <span class="comment">************ SPECIAL FORMATTED COMMENT **********</span>
00492 <span class="comment">EW5 API FORMATTED COMMENT</span>
00493 <span class="comment">TYPE FUNCTION_PROTOTYPE</span>
00494 <span class="comment"></span>
00495 <span class="comment">LIBRARY EW_LIBSRC</span>
00496 <span class="comment"></span>
00497 <span class="comment">SUB_LIBRARY RW_STRONGMOTION_II</span>
00498 <span class="comment"></span>
00499 <span class="comment">LANGUAGE C</span>
00500 <span class="comment"></span>
00501 <span class="comment">LOCATION THIS_FILE</span>
00502 <span class="comment"></span>
00503 <span class="comment">FUNCTION log_strongmotionII</span>
00504 <span class="comment"></span>
00505 <span class="comment">SOURCE_LOCATION src/libsrc/util/rw_strongmotionII.c</span>
00506 <span class="comment"></span>
00507 <span class="comment">RETURN_TYPE void </span>
00508 <span class="comment"></span>
00509 <span class="comment">PARAMETER 1</span>
00510 <span class="comment">PARAM_NAME sm</span>
00511 <span class="comment">PARAM_TYPE SM_INFO *</span>
00512 <span class="comment">PARAM_DESCRIPTION  Pointer to an SM_INFO struct whose </span>
00513 <span class="comment">contents the function will log to a file.</span>
00514 <span class="comment"></span>
00515 <span class="comment"></span>
00516 <span class="comment">DESCRIPTION Writes the contents of a SM_INFO structure </span>
00517 <span class="comment">to an Earthworm log file.</span>
00518 <span class="comment"></span>
00519 <span class="comment">*************************************************</span>
00520 <span class="comment">************************************************/</span>
00521 <span class="keywordtype">void</span> <a class="code" href="rw__strongmotionII_8c.html#a10">log_strongmotionII</a>( <a class="code" href="struct__SM__INFO.html">SM_INFO</a> *sm );
00522 
00523 <span class="preprocessor">#endif </span><span class="comment">/* #ifndef RW_STRONGMOTION_II_H */</span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:08 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
