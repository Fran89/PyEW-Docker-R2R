<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>putaway.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>putaway.c</h1><a href="putaway_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">/*</span>
00003 <span class="comment"> *   THIS FILE IS UNDER RCS - DO NOT MODIFY UNLESS YOU HAVE</span>
00004 <span class="comment"> *   CHECKED IT OUT USING THE COMMAND CHECKOUT.</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *    $Id: putaway_8c-source.html 2161 2006-05-19 16:55:03Z paulf $</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> *    Revision history:</span>
00009 <span class="comment"> *     $Log$
00009 <span class="comment"> *     Revision 1.1  2006/05/19 16:55:02  paulf
00009 <span class="comment"> *     first inclusion
00009 <span class="comment"> *</span>
00010 <span class="comment"> *     Revision 1.10  2002/03/20 21:07:01  cjbryan</span>
00011 <span class="comment"> *     added EventSubnet to SEISPA_next_ev call</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * 3-feb-2001, S. Flower (British Geological Survey)</span>
00015 <span class="comment"> *     Added code for new 'gse_int' and 'seisan' output data types</span>
00016 <span class="comment"> *     All new code is prefixed with the initials 'SMF'</span>
00017 <span class="comment"></span>
00018 <span class="comment"> *     Revision 1.8  2001/04/12 03:47:36  lombard</span>
00019 <span class="comment"> *     Added include file putaway.h for function prototypes</span>
00020 <span class="comment"> *     Removed MaxTraceMsg argument from PA_init(), no longer used.</span>
00021 <span class="comment"> *</span>
00022 <span class="comment"> *     Revision 1.7  2001/03/22 20:56:29  cjbryan</span>
00023 <span class="comment"> *     deleted EventInst from PA_next_ev function call as it is no</span>
00024 <span class="comment"> *     longer needed by any of the putaway routines</span>
00025 <span class="comment"> *     cleaned up all other relic uses of EventInst and EventMod</span>
00026 <span class="comment"> *</span>
00027 <span class="comment"> *     Revision 1.6  2001/03/21 16:40:40  alex</span>
00028 <span class="comment"> *     deleted now extraneous EventMod variable</span>
00029 <span class="comment"> *</span>
00030 <span class="comment"> *     Revision 1.5  2001/03/21 02:15:28  alex</span>
00031 <span class="comment"> *     added EventSubnet to SUDSPA_next_ev call</span>
00032 <span class="comment"> *</span>
00033 <span class="comment"> *     Revision 1.4  2000/07/08 19:26:05  lombard</span>
00034 <span class="comment"> *     replace `=' in if statements with `=='; two of these were in PA_close().</span>
00035 <span class="comment"> *</span>
00036 <span class="comment"> *     Revision 1.3  2000/03/14 18:35:11  lucky</span>
00037 <span class="comment"> *     *** empty log message ***</span>
00038 <span class="comment"> *</span>
00039 <span class="comment"> *     Revision 1.2  2000/03/10 23:21:05  davidk</span>
00040 <span class="comment"> *     changed the putaway routines so that OutputFormat is specified at</span>
00041 <span class="comment"> *     initialization instead of per SCN.  Consolidated all of the EventID's</span>
00042 <span class="comment"> *     so that now there is a single EventID string that is passed into</span>
00043 <span class="comment"> *     PA_next_ev.</span>
00044 <span class="comment"> *     /</span>
00045 <span class="comment"> *</span>
00046 <span class="comment"> *     Revision 1.1  2000/02/14 18:51:48  lucky</span>
00047 <span class="comment"> *     Initial revision</span>
00048 <span class="comment"> *</span>
00049 <span class="comment"> *</span>
00050 <span class="comment"> */</span>
00051 
00052 <span class="comment">/*</span>
00053 <span class="comment">    putaway.c</span>
00054 <span class="comment"></span>
00055 <span class="comment">  Thu Jul 22 13:21:09 MDT 1999 lucky</span>
00056 <span class="comment"></span>
00057 <span class="comment">   Separated the putaway routines for the following output</span>
00058 <span class="comment">   formats currently supported:</span>
00059 <span class="comment">        ah</span>
00060 <span class="comment">        sac</span>
00061 <span class="comment">        suds</span>
00062 <span class="comment">                seisan</span>
00063 <span class="comment">                gse_int</span>
00064 <span class="comment">        tank</span>
00065 <span class="comment"></span>
00066 <span class="comment">   This file will now become a library object, so that it can be</span>
00067 <span class="comment">   used by both trig2disk and wave2disk. Therefore, adding a new</span>
00068 <span class="comment">   output format will only require changing this file.</span>
00069 <span class="comment"></span>
00070 <span class="comment"></span>
00071 <span class="comment"> Wed Oct 20 09:53:50 MDT 1999 lucky</span>
00072 <span class="comment"></span>
00073 <span class="comment">   Fixed a bug which limited the size of the OutBuffer.</span>
00074 <span class="comment"></span>
00075 <span class="comment"></span>
00076 <span class="comment">*/</span>
00077 
00078 <span class="preprocessor">#include &lt;string.h&gt;</span>
00079 <span class="preprocessor">#include &lt;<a class="code" href="earthworm_8h.html">earthworm.h</a>&gt;</span>
00080 <span class="preprocessor">#include &lt;<a class="code" href="ws__clientII_8h.html">ws_clientII.h</a>&gt;</span>
00081 <span class="preprocessor">#include &lt;<a class="code" href="ahhead_8h.html">ahhead.h</a>&gt;</span>   <span class="comment">/* for AHHEADSIZE */</span>
00082 <span class="preprocessor">#include &lt;<a class="code" href="putaway_8h.html">putaway.h</a>&gt;</span>
00083 <span class="preprocessor">#include &lt;<a class="code" href="pa__subs_8h.html">pa_subs.h</a>&gt;</span>
00084 <span class="preprocessor">#include &lt;<a class="code" href="sachead_8h.html">sachead.h</a>&gt;</span>  <span class="comment">/* for SACHEADERSIZE */</span>
00085 
00086 <span class="comment">/* SMF: definitions for GSE and SEIsan putaway routines */</span>
00087 <span class="preprocessor">#include "<a class="code" href="gsehead_8h.html">gsehead.h</a>"</span>
00088 <span class="preprocessor">#include "<a class="code" href="seihead_8h.html">seihead.h</a>"</span>
00089 
<a name="l00090"></a><a class="code" href="putaway_8c.html#a0">00090</a> <span class="preprocessor">#define         AH_FORMAT               0</span>
<a name="l00091"></a><a class="code" href="putaway_8c.html#a1">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define         SAC_FORMAT              1</span>
<a name="l00092"></a><a class="code" href="putaway_8c.html#a2">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define         SUDS_FORMAT             2</span>
<a name="l00093"></a><a class="code" href="putaway_8c.html#a3">00093</a> <span class="preprocessor"></span><span class="preprocessor">#define         TANK_FORMAT             3</span>
00094 <span class="preprocessor"></span><span class="comment">/* SMF: new GSE format code - we use GSE_INT to allow future expansion</span>
00095 <span class="comment"> *      to the other GSE sub-format types (CM6 and CM8) */</span>
<a name="l00096"></a><a class="code" href="putaway_8c.html#a4">00096</a> <span class="preprocessor">#define         GSE_INT_FORMAT          4</span>
00097 <span class="preprocessor"></span><span class="comment">/* SMF: new SEIsan format code */</span>
<a name="l00098"></a><a class="code" href="putaway_8c.html#a5">00098</a> <span class="preprocessor">#define         SEI_FORMAT              5</span>
00099 <span class="preprocessor"></span>
00100 
00101 <span class="comment">/* Initialization function,</span>
00102 <span class="comment">*       This is the Put Away startup intializer. This is called when    *</span>
00103 <span class="comment">*       the system first comes up. Here is a chance to look around      *</span>
00104 <span class="comment">*       and see if it's possible to do business, and to complain        *</span>
00105 <span class="comment">*       if not ,BEFORE an event has to be processed.                    *</span>
00106 <span class="comment">*/</span>
<a name="l00107"></a><a class="code" href="putaway_8c.html#a6">00107</a> <span class="keywordtype">int</span> <a class="code" href="putaway_8c.html#a6">PA_init</a> (<span class="keywordtype">char</span> *DataFormat, <span class="keywordtype">long</span> TraceBufferLen, <span class="keywordtype">long</span> *OutBufferLen, 
00108              <span class="keywordtype">int</span> *FormatInd, <span class="keywordtype">char</span> *OutDir, <span class="keywordtype">char</span> * OutputFormat, <span class="keywordtype">int</span> debug)
00109 {
00110 
00111 
00112   <span class="keywordflow">if</span> ((DataFormat == NULL) || (TraceBufferLen &lt;= 0) ||
00113       (OutBufferLen == NULL) || (FormatInd == NULL))
00114   {
00115     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: invalid parameters passed in.\n"</span>);
00116     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00117   }
00118 
00119 
00120   <span class="comment">/* size OutBuffer to  include header info */</span>
00121   <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"ah"</span>) == 0)
00122   {
00123     *FormatInd = <a class="code" href="putaway_8c.html#a0">AH_FORMAT</a>;
00124     *OutBufferLen = TraceBufferLen + <a class="code" href="ahhead_8h.html#a1">AHHEADSIZE</a>;
00125     <span class="keywordflow">if</span> (<a class="code" href="ahputaway_8c.html#a48">AHPA_init</a> (OutBufferLen, OutDir, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00126     {
00127       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to AHPA_init failed!\n"</span> );
00128       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00129     }
00130 
00131   }
00132   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"sac"</span>) == 0)
00133   {
00134     *FormatInd = <a class="code" href="putaway_8c.html#a1">SAC_FORMAT</a>;
00135     *OutBufferLen = TraceBufferLen + <a class="code" href="sachead_8h.html#a0">SACHEADERSIZE</a>;
00136     <span class="keywordflow">if</span> (<a class="code" href="sacputaway_8c.html#a36">SACPA_init</a> (*OutBufferLen, OutDir, OutputFormat, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00137     {
00138       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SACPA_init failed!\n"</span> );
00139       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00140     }
00141   }
00142   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"suds"</span>) == 0)
00143   {
00144     *FormatInd = <a class="code" href="putaway_8c.html#a2">SUDS_FORMAT</a>;
00145     *OutBufferLen = TraceBufferLen;
00146     <span class="keywordflow">if</span> (<a class="code" href="sudsputaway_8c.html#a8">SUDSPA_init</a> (*OutBufferLen, OutDir, OutputFormat, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00147     {
00148       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SUDSPA_init failed!\n"</span> );
00149       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00150     }
00151   }
00152   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"tank"</span>) == 0)
00153   {
00154     *FormatInd = <a class="code" href="putaway_8c.html#a3">TANK_FORMAT</a>;
00155     <span class="keywordflow">if</span> (<a class="code" href="tankputaway_8c.html#a3">TANKPA_init</a> (OutDir, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00156     {
00157       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to TANKPA_init failed!\n"</span> );
00158       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00159     }
00160   }
00161   <span class="comment">/* SMF: new code for GSE */</span>
00162   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"gse_int"</span>) == 0)
00163   {
00164     *FormatInd = <a class="code" href="putaway_8c.html#a4">GSE_INT_FORMAT</a>;
00165     *OutBufferLen = TraceBufferLen;
00166     <span class="keywordflow">if</span> (<a class="code" href="gseputaway_8c.html#a16">GSEPA_init</a> (OutDir, OutputFormat, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00167     {
00168       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to GSEPA_init failed!\n"</span> );
00169             <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00170     }
00171   }
00172   <span class="comment">/* SMF: new code for SEIsan */</span>
00173   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (DataFormat,<span class="stringliteral">"seisan"</span>) == 0)
00174   {
00175     *FormatInd = <a class="code" href="putaway_8c.html#a5">SEI_FORMAT</a>;
00176     *OutBufferLen = TraceBufferLen;
00177     <span class="keywordflow">if</span> (<a class="code" href="seiputaway_8c.html#a1">SEIPA_init</a> (OutDir, OutputFormat, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00178     {
00179       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SEIPA_init failed!\n"</span> );
00180       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00181     }
00182   }
00183   <span class="keywordflow">else</span>
00184   {
00185     <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>,<span class="stringliteral">"waveputaway: undefined DataFormat: %s\n"</span>, DataFormat);
00186     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00187   }
00188 
00189 
00190 
00191 
00192   <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00193 
00194 }
00195 
00196 
00197 <span class="comment">/****************************************************************************</span>
00198 <span class="comment">*       This is the Put Away event initializer. It's called when a snippet</span>
00199 <span class="comment">*       has been received, and is about to be processed.</span>
00200 <span class="comment">*       It gets to see the pointer to the TraceRequest array,</span>
00201 <span class="comment">*       and the number of loaded trace structures.</span>
00202 <span class="comment">*****************************************************************************/</span>
<a name="l00203"></a><a class="code" href="putaway_8c.html#a7">00203</a> <span class="keywordtype">int</span> <a class="code" href="putaway_8c.html#a7">PA_next_ev</a> (<span class="keywordtype">char</span> *EventID, <a class="code" href="structTRACE__REQ.html">TRACE_REQ</a> *trace_req, <span class="keywordtype">int</span> num_req, 
00204                 <span class="keywordtype">int</span> FormatInd, <span class="keywordtype">char</span> *OutDir, <span class="keywordtype">char</span> *EventDate, 
00205                 <span class="keywordtype">char</span> *EventTime, <span class="keywordtype">char</span> *EventSubnet, <span class="keywordtype">int</span> debug)
00206 {
00207 
00208 
00209   <span class="keywordflow">if</span> ((trace_req == NULL) || (OutDir == NULL) || (EventDate == NULL) ||
00210       (EventTime == NULL) || (EventID == NULL))
00211   {
00212     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Invalid parameters passed in!\n"</span>);
00213     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00214   }
00215 
00216 
00217   <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a0">AH_FORMAT</a>)
00218   {
00219     <span class="keywordflow">if</span> (<a class="code" href="ahputaway_8c.html#a49">AHPA_next_ev</a> (trace_req, num_req, OutDir, 
00220                       EventDate, EventTime, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00221     {
00222       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to AHPA_next_ev failed!\n"</span>);
00223       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00224     }
00225   }
00226   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a1">SAC_FORMAT</a>)
00227   {
00228     <span class="keywordflow">if</span> (<a class="code" href="sacputaway_8c.html#a37">SACPA_next_ev</a> (EventID, trace_req, num_req, OutDir, 
00229                        EventDate, EventTime, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00230     {
00231       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SACPA_next_ev failed!\n"</span>);
00232       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00233     }
00234   }
00235   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a2">SUDS_FORMAT</a>)
00236   {
00237     <span class="keywordflow">if</span> (<a class="code" href="sudsputaway_8c.html#a9">SUDSPA_next_ev</a>(EventID, trace_req, num_req, OutDir, EventDate,
00238                        EventTime, EventSubnet, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00239     {
00240       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SUDSPA_next_ev failed!\n"</span>);
00241       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00242     }
00243         
00244   }
00245   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a3">TANK_FORMAT</a>)
00246   {
00247     <span class="keywordflow">if</span> (<a class="code" href="tankputaway_8c.html#a4">TANKPA_next_ev</a> (EventID, OutDir, EventDate, 
00248                         EventTime, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00249     {
00250       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to TANKPA_next_ev failed!\n"</span>);
00251       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00252     }
00253   }
00254   <span class="comment">/* SMF: new code for GSE */</span>
00255   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a4">GSE_INT_FORMAT</a>)
00256   {
00257     <span class="keywordflow">if</span> (<a class="code" href="gseputaway_8c.html#a17">GSEPA_next_ev</a> (trace_req, num_req, OutDir, 
00258                        EventDate, EventTime, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00259     {
00260       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to GSEPA_next_ev failed!\n"</span>);
00261       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00262     }
00263   }
00264   <span class="comment">/* SMF: new code for SEIsan */</span>
00265   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a5">SEI_FORMAT</a>)
00266   {
00267     <span class="keywordflow">if</span> (<a class="code" href="seiputaway_8c.html#a2">SEIPA_next_ev</a> (trace_req, num_req, OutDir, 
00268                        EventDate, EventTime, EventSubnet, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00269     {
00270       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SEIPA_next_ev failed!\n"</span>);
00271       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00272     }
00273   }
00274   <span class="keywordflow">else</span>
00275   {
00276     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: undefined DataFormat: %d!\n"</span>, FormatInd);
00277     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00278   }
00279 
00280 
00281   <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00282 }
00283 
00284 
00285 
00286 <span class="comment">/*****************************************************************************</span>
00287 <span class="comment">*   This is the working entry point into the disposal system. This routine</span>
00288 <span class="comment">*   gets called for each trace snippet which has been recovered. It gets</span>
00289 <span class="comment">*   to see the corresponding SNIPPET structure, and the event id </span>
00290 <span class="comment">*****************************************************************************/</span>
<a name="l00291"></a><a class="code" href="putaway_8c.html#a8">00291</a> <span class="keywordtype">int</span> <a class="code" href="putaway_8c.html#a8">PA_next</a> (<a class="code" href="structTRACE__REQ.html">TRACE_REQ</a> *getThis, <span class="keywordtype">int</span> FormatInd, 
00292              <span class="keywordtype">double</span> GapThresh, <span class="keywordtype">long</span> OutBufferLen, <span class="keywordtype">int</span> debug)
00293 {
00294 
00295   <span class="keywordflow">if</span> (getThis == NULL)
00296   {
00297     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">"e"</span>, <span class="stringliteral">"Invalid arguments passed in.\n"</span>);
00298     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00299   }
00300 
00301   <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a0">AH_FORMAT</a>)
00302   {
00303     <span class="keywordflow">if</span> (<a class="code" href="ahputaway_8c.html#a50">AHPA_next</a> (getThis, GapThresh, OutBufferLen, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00304     {
00305       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to AHPA_next failed!\n"</span>);
00306       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00307     }
00308   }
00309   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a1">SAC_FORMAT</a>)
00310   {
00311     <span class="keywordflow">if</span> (<a class="code" href="sacputaway_8c.html#a38">SACPA_next</a> (getThis, GapThresh, OutBufferLen, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00312     {
00313       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SACPA_next failed!\n"</span>);
00314       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00315     }
00316   }
00317   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a2">SUDS_FORMAT</a>)
00318   {
00319     <span class="keywordflow">if</span> (<a class="code" href="sudsputaway_8c.html#a10">SUDSPA_next</a> (getThis, GapThresh, OutBufferLen, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00320     {
00321       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SUDSPA_next failed!\n"</span>);
00322       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00323     }
00324   }
00325   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a3">TANK_FORMAT</a>)
00326   {
00327     <span class="keywordflow">if</span> (<a class="code" href="tankputaway_8c.html#a5">TANKPA_next</a> (getThis, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00328     {
00329       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to TANKPA_next failed!\n"</span>);
00330       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00331     }
00332   }
00333   <span class="comment">/* SMF: new code for GSE */</span>
00334   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a4">GSE_INT_FORMAT</a>)
00335   {
00336     <span class="keywordflow">if</span> (<a class="code" href="gseputaway_8c.html#a18">GSEPA_next</a> (getThis, GapThresh, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00337     {
00338       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to GSEPA_next failed!\n"</span>);
00339       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00340     }
00341   }
00342   <span class="comment">/* SMF: new code for SEIsan */</span>
00343   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a5">SEI_FORMAT</a>)
00344   {
00345     <span class="keywordflow">if</span> (<a class="code" href="seiputaway_8c.html#a3">SEIPA_next</a> (getThis, GapThresh, debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00346     {
00347       <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SEIPA_next failed!\n"</span>);
00348       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00349     }
00350   }
00351   <span class="keywordflow">else</span>
00352   {
00353     <a class="code" href="logit_8c.html#a18">logit</a>(<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: undefined DataFormat: %d\n"</span>, FormatInd);
00354     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00355   }
00356 
00357   <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00358 
00359 }
00360 
00361 
00362 <span class="comment">/************************************************************************</span>
00363 <span class="comment">*       This is the Put Away end event routine. It's called after we've *</span>
00364 <span class="comment">*                                                                       *</span>
00365 <span class="comment">*       finished processing one event.                                  *</span>
00366 <span class="comment">*************************************************************************/</span>
<a name="l00367"></a><a class="code" href="putaway_8c.html#a9">00367</a> <span class="keywordtype">int</span> <a class="code" href="putaway_8c.html#a9">PA_end_ev</a> (<span class="keywordtype">int</span> FormatInd, <span class="keywordtype">int</span> debug)
00368 {
00369 
00370   <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a0">AH_FORMAT</a>)
00371   {
00372     <span class="keywordflow">if</span> (<a class="code" href="ahputaway_8c.html#a51">AHPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00373     {
00374       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to AHPA_end_ev failed!\n"</span>);
00375       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00376     }
00377   }
00378   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a1">SAC_FORMAT</a>)
00379   {
00380     <span class="keywordflow">if</span> (<a class="code" href="sacputaway_8c.html#a39">SACPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00381     {
00382       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SACPA_end_ev failed!\n"</span>);
00383       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00384     }
00385   }
00386   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a2">SUDS_FORMAT</a>)
00387   {
00388     <span class="keywordflow">if</span> (<a class="code" href="sudsputaway_8c.html#a11">SUDSPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00389     {
00390       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SUDSPA_end_ev failed!\n"</span>);
00391       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00392     }
00393   }
00394   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a3">TANK_FORMAT</a>)
00395   {
00396     <span class="keywordflow">if</span> (<a class="code" href="tankputaway_8c.html#a6">TANKPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00397     {
00398       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to TANKPA_end_ev failed!\n"</span>);
00399       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00400     }
00401   }
00402   <span class="comment">/* SMF: new code for GSE */</span>
00403   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a4">GSE_INT_FORMAT</a>)
00404   {
00405     <span class="keywordflow">if</span> (<a class="code" href="gseputaway_8c.html#a19">GSEPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00406     {
00407       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to GSEPA_end_ev failed!\n"</span>);
00408       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00409     }
00410   }
00411   <span class="comment">/* SMF: new code for SEIsan */</span>
00412   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a5">SEI_FORMAT</a>)
00413   {
00414     <span class="keywordflow">if</span> (<a class="code" href="seiputaway_8c.html#a4">SEIPA_end_ev</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00415     {
00416       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SEIPA_end_ev failed!\n"</span>);
00417       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00418     }
00419   }
00420   <span class="keywordflow">else</span>
00421   {
00422     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: undefined DataFormat: %d\n"</span>, FormatInd);
00423     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00424   }
00425 
00426   <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00427 }
00428 
00429 <span class="comment">/************************************************************************</span>
00430 <span class="comment">*       This is the Put Away close routine. It's called after when      *</span>
00431 <span class="comment">*       we're being shut down.                                          *</span>
00432 <span class="comment">*************************************************************************/</span>
<a name="l00433"></a><a class="code" href="putaway_8c.html#a10">00433</a> <span class="keywordtype">int</span> <a class="code" href="putaway_8c.html#a10">PA_close</a> (<span class="keywordtype">int</span> FormatInd, <span class="keywordtype">int</span> debug)
00434 {
00435 
00436   <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a0">AH_FORMAT</a>)
00437   {
00438     <span class="keywordflow">if</span> (<a class="code" href="ahputaway_8c.html#a52">AHPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00439     {
00440       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to AHPA_close failed!\n"</span>);
00441       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00442     }
00443   }
00444   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a1">SAC_FORMAT</a>)
00445   {
00446     <span class="keywordflow">if</span> (<a class="code" href="sacputaway_8c.html#a40">SACPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00447     {
00448       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SACPA_close failed!\n"</span>);
00449       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00450     }
00451   }
00452   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a2">SUDS_FORMAT</a>)
00453   {
00454     <span class="keywordflow">if</span> (<a class="code" href="sudsputaway_8c.html#a12">SUDSPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00455     {
00456       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SUDSPA_close failed!\n"</span>);
00457       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00458     }
00459   }
00460   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a3">TANK_FORMAT</a>)
00461   {
00462     <span class="keywordflow">if</span> (<a class="code" href="tankputaway_8c.html#a7">TANKPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00463     {
00464       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to TANKPA_close failed!\n"</span>);
00465       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00466     }
00467   }
00468   <span class="comment">/* SMF: new code for GSE */</span>
00469   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a4">GSE_INT_FORMAT</a>)
00470   {
00471     <span class="keywordflow">if</span> (<a class="code" href="gseputaway_8c.html#a20">GSEPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00472     {
00473       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to GSEPA_close failed!\n"</span>);
00474       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00475     }
00476   }
00477   <span class="comment">/* SMF: new code for SEIsan */</span>
00478   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FormatInd == <a class="code" href="putaway_8c.html#a5">SEI_FORMAT</a>)
00479   {
00480     <span class="keywordflow">if</span> (<a class="code" href="seiputaway_8c.html#a5">SEIPA_close</a> (debug) != <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>)
00481     {
00482       <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: Call to SEIPA_close failed!\n"</span>);
00483       <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00484     }
00485   }
00486   <span class="keywordflow">else</span>
00487   {
00488     <a class="code" href="logit_8c.html#a18">logit</a> (<span class="stringliteral">""</span>, <span class="stringliteral">"waveputaway: undefined DataFormat: %d\n"</span>, FormatInd);
00489     <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a6">EW_FAILURE</a>;
00490   }
00491 
00492   <span class="keywordflow">return</span> <a class="code" href="earthworm__defs_8h.html#a5">EW_SUCCESS</a>;
00493 
00494 }
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 09:16:07 2003 for Earthworm Libs by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
