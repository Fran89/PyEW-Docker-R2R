<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      statrigfilter â€“ Earthworm
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="http://earthwormcentral.com/trac/ew/search" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="http://earthwormcentral.com/trac/ew/wiki/statrigfilter?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="http://earthwormcentral.com/trac/ew/wiki" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/tracjsgantt/jsgantt.css" type="text/css" /><link rel="stylesheet" href="../chrome/tracjsgantt/tracjsgantt.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="http://earthwormcentral.com/trac/ew/search/opensearch" title="Search Earthworm" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/tracjsgantt/jsgantt.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/ew/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://earthwormcentral.com/trac/ew"><img src="../chrome/site/images/ew.logo_tiny.png" alt="" /></a>
      </div>
      <form id="search" action="http://earthwormcentral.com/trac/ew/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="http://earthwormcentral.com/trac/ew/login">Login</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="http://earthwormcentral.com/trac/ew/about">About Trac</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/prefs">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="http://earthwormcentral.com/trac/ew/wiki">Wiki</a></li><li><a href="http://earthwormcentral.com/trac/ew/timeline">Timeline</a></li><li><a href="http://earthwormcentral.com/trac/ew/roadmap">Roadmap</a></li><li><a href="http://earthwormcentral.com/trac/ew/browser">Browse Source</a></li><li><a href="http://earthwormcentral.com/trac/ew/query">View Tickets</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="http://earthwormcentral.com/trac/ew/wiki">wiki:</a><a class="pathentry" href="statrigfilter.html" title="View statrigfilter">statrigfilter</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="WikiStart.html">Start Page</a></li><li><a href="TitleIndex.html">Index</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/wiki/statrigfilter?action=history">History</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          
          <div class="trac-modifiedby">
            <span><a href="http://earthwormcentral.com/trac/ew/wiki/statrigfilter?action=diff&amp;version=1" title="Version 1 by branden">Last modified</a> <a class="timeline" href="http://earthwormcentral.com/trac/ew/timeline?from=2012-03-25T14%3A01%3A42-07%3A00&amp;precision=second" title="2012-03-25T14:01:42-07:00 in Timeline">18 months</a> ago</span>
            <span class="trac-print">Last modified on 03/25/12 14:01:42</span>
          </div>
          <div id="wikipage"><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="statrigfilter.html#EarthwormModule:statrigfilter">Earthworm Module: statrigfilter</a>
    <ol>
      <li>
        <a href="statrigfilter.html#Function">Function</a>
      </li>
      <li>
        <a href="statrigfilter.html#Details">Details</a>
        <ol>
          <li>
            <a href="statrigfilter.html#ExampleConfigurationFile">Example Configuration File</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="statrigfilter.html#HelpfulHints">Helpful Hints</a>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h1 id="EarthwormModule:statrigfilter"><a class="wiki" href="Earthworm.html">Earthworm</a> Module: statrigfilter</h1>
<p>
<strong>Contributed by: Lynn Dietz for the CISN</strong>
</p>
<h2 id="Function">Function</h2>
<p>
A pkfilter like module for filtering out duplicate station triggers. (new in EW v7.0)
</p>
<h2 id="Details">Details</h2>
<p>
The purpose of statrigfilter is to elimnate "duplicate" triggers from a given "station". For statrigfilter, all channels which have
matching station code and network code are considered to be the from the same "station". The rules for what are considered "duplicate" triggers can be found in the specifications file used to design this program:
</p>
<p>
<a class="wiki" href="statrigfilter.designspecs.txt.html">statrigfilter.designspecs.txt</a>
</p>
<p>
Statrigfilter is location-code friendly and will handle both  TYPE_CARLSTATRIG_SCNL and TYPE_CARLSTATRIG messages.
</p>
<h3 id="ExampleConfigurationFile">Example Configuration File</h3>
<pre class="wiki"># 
# statrigfilter configuration file

# Basic Earthworm setup:
#------------------------
 MyModuleId   MOD_STATRIGFILTER # module id for this instance of statrigfilter 
 InRing       PICK_RING         # shared memory ring for input
 OutRing      FILTERPICK_RING   # shared memory ring for output
 HeartbeatInt 30                # seconds between heartbeats
 LogFile      1                 # 0 log to stderr/stdout only 
                                # 1 log to stderr/stdout and to disk file
                                # 2 log to disk file only
 Debug        1

# List the message logos to grab from InRing, WILDCARDs permitted.
# Multiple "GetLogo" commands are allowed, with no hardcoded limit.
#         Installation    Module      Message Types
#-----------------------------------------------------------------
 GetLogo  INST_WILDCARD  MOD_WILDCARD # TYPE_CARLSTATRIG &amp; TYPE_CARLSTATRIG_SCNL

# Trigger Filtering Parameters
#-----------------------------
 TriggerHistory       5      # Keep track of this many triggers which have
                             # made it thru the filter for each station.

 TimeTolerance        2.0    # If trigger times are within this many seconds of
                             # each other, they are "duplicates."

 OlderTrigAllowed     1      # 0=reject any non-duplicate trigger whose 
                             #   timestamp is earlier than the youngest 
                             #   passed trigger for this station.
                             # 1=accept a non-duplicate trigger whose timestamp
                             #   is earlier than the youngest passed trigger,
                             #   but place a limit on how old it can be.
                             #   Must also use the "OlderTrigLimit" command.
                             # 2=accept any non-duplicate trigger whose 
                             #   timestamp is earlier than the youngest   
                             #   passed trigger.

 OlderTrigLimit       10     # Required only if OlderTrigAllowed = 1
                             # Accept an trigger whose timestamp is between
                             # TimeTolerance and OlderTrigLimit sec     
                             # earlier than the youngest passed trigger
                             # from this station.

# List of Allowed Components
#---------------------------
# If you want ALL component codes to be eligible to pass thru 
# statrigfilter, comment out all "AllowComponent" commands.
# If you want to limit which component codes pass thru statrigfilter,
# use one "AllowComponent" command for each allowed component code.
#AllowComponent   VDZ
#AllowComponent   VHZ
#AllowComponent   VLZ
#AllowComponent   SHZ
#AllowComponent   SLZ
#AllowComponent   EHZ
#AllowComponent   HHZ
#AllowComponent   BHZ
#AllowComponent   DP1
#AllowComponent   DP2
#AllowComponent   DP3
#AllowComponent   EP1
#AllowComponent   EP2
#AllowComponent   EP3

# Optional commands:
#-------------------
 MaxMessageSize   128        # length (bytes) of largest msg to be processed
                             # from InRing.  Default=MAX_BYTES_PER_EQ

 UseOriginalLogo  1          # 0  apply statrigfilter's logo to any msgs that
                             #    pass the filter test (normal Earthworm behavior)
                             # non-zero means apply the original logo to any
                             #    messages that pass the filter test.  This
                             #    also requires that InRing and OutRing be 
                             #    different to avoid "missed message" or
                             #    "sequence gap" storms in trigger-reading modules..
</pre><h2 id="HelpfulHints">Helpful Hints</h2>
</div>
        
        
      </div>
      

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="http://earthwormcentral.com/trac/ew/wiki/statrigfilter?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="http://earthwormcentral.com/trac/ew/about"><strong>Trac 0.12.4</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>