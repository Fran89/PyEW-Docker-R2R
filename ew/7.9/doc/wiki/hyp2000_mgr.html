<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      hyp2000_mgr – Earthworm
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="http://earthwormcentral.com/trac/ew/search" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="http://earthwormcentral.com/trac/ew/wiki/hyp2000_mgr?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="http://earthwormcentral.com/trac/ew/wiki" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/tracjsgantt/jsgantt.css" type="text/css" /><link rel="stylesheet" href="../chrome/tracjsgantt/tracjsgantt.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="http://earthwormcentral.com/trac/ew/search/opensearch" title="Search Earthworm" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/tracjsgantt/jsgantt.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/ew/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://earthwormcentral.com/trac/ew"><img src="../chrome/site/images/ew.logo_tiny.png" alt="" /></a>
      </div>
      <form id="search" action="http://earthwormcentral.com/trac/ew/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="http://earthwormcentral.com/trac/ew/login">Login</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="http://earthwormcentral.com/trac/ew/about">About Trac</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/prefs">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="http://earthwormcentral.com/trac/ew/wiki">Wiki</a></li><li><a href="http://earthwormcentral.com/trac/ew/timeline">Timeline</a></li><li><a href="http://earthwormcentral.com/trac/ew/roadmap">Roadmap</a></li><li><a href="http://earthwormcentral.com/trac/ew/browser">Browse Source</a></li><li><a href="http://earthwormcentral.com/trac/ew/query">View Tickets</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="http://earthwormcentral.com/trac/ew/wiki">wiki:</a><a class="pathentry" href="hyp2000_mgr.html" title="View hyp2000_mgr">hyp2000_mgr</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="WikiStart.html">Start Page</a></li><li><a href="TitleIndex.html">Index</a></li><li class="last"><a href="http://earthwormcentral.com/trac/ew/wiki/hyp2000_mgr?action=history">History</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          
          <div class="trac-modifiedby">
            <span><a href="http://earthwormcentral.com/trac/ew/wiki/hyp2000_mgr?action=diff&amp;version=10" title="Version 10 by paulf">Last modified</a> <a class="timeline" href="http://earthwormcentral.com/trac/ew/timeline?from=2012-06-04T13%3A18%3A08-07%3A00&amp;precision=second" title="2012-06-04T13:18:08-07:00 in Timeline">15 months</a> ago</span>
            <span class="trac-print">Last modified on 06/04/12 13:18:08</span>
          </div>
          <div id="wikipage"><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="hyp2000_mgr.html#EarthwormModule:hyp2000_mgr">Earthworm Module: hyp2000_mgr</a>
    <ol>
      <li>
        <a href="hyp2000_mgr.html#Function">Function</a>
      </li>
      <li>
        <a href="hyp2000_mgr.html#Details">Details</a>
        <ol>
          <li>
            <a href="hyp2000_mgr.html#IMPORTANTNOTEONLOCATIONCODES">IMPORTANT NOTE ON LOCATION CODES</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="hyp2000_mgr.html#ConfigurationFileCommands">Configuration File Commands</a>
        <ol>
          <li>
            <a href="hyp2000_mgr.html#EXAMPLECONFIGURATIONFILE">EXAMPLE CONFIGURATION FILE</a>
          </li>
          <li>
            <a href="hyp2000_mgr.html#HYPO_MGRCOMMANDLINEARGUMENTS">HYPO_MGR COMMAND LINE ARGUMENTS</a>
          </li>
          <li>
            <a href="hyp2000_mgr.html#FUNCTIONALCOMMANDLISTING">FUNCTIONAL COMMAND LISTING</a>
          </li>
          <li>
            <a href="hyp2000_mgr.html#ALPHABETICCOMMANDLISTINGDESCRIPTION">ALPHABETIC COMMAND LISTING &amp; DESCRIPTION</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="hyp2000_mgr.html#HelpfulHints">Helpful Hints</a>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h1 id="EarthwormModule:hyp2000_mgr"><a class="wiki" href="Earthworm.html">Earthworm</a> Module: hyp2000_mgr</h1>
<p>
<strong>Contributed by: Fred Klein, at USGS Menlo Park</strong>
</p>
<h2 id="Function">Function</h2>
<p>
Relocates earthquakes using Hypoinverse (tail of mega-module)
</p>
<h2 id="Details">Details</h2>
<p>
Hyp2000_mgr is an Earthworm program which calls an encapsulated version of hypoinverse (hyp2000), written by Fred Klein, at USGS Menlo Park. Hyp2000_mgr gets "arc messages", containing associated picks, via a pipe from another program. Hyp2000_mgr call hyp2000 with the contents of the "arc message". Hyp2000 locates the event. Hyp2000_mgr then creates a new "arc message" with the location results from hyp2000 and sends that arc message to an Earthworm transport ring.
</p>
<p>
Hyp2000_mgr is written in C, but most calculations are performed in FORTRAN subroutines, taken from the standard release of hypoinverse. Minor changes to the source code are required for the program to run on different operating systems.
</p>
<p>
Be sure and look at the command web page for details about how Location codes are now used.
</p>
<p>
Official <em>hypoinverse</em>, version 1.3, code and documentation are available here: <a class="ext-link" href="ftp://ehzftp.wr.usgs.gov/klein/hyp1.3"><span class="icon">​</span>ftp://ehzftp.wr.usgs.gov/klein/hyp1.3</a>
The <em>older</em> hypoinverse version 1.2 code and documentation are available here: <a class="ext-link" href="ftp://ehzftp.wr.usgs.gov/klein/hyp2000"><span class="icon">​</span>ftp://ehzftp.wr.usgs.gov/klein/hyp2000</a>
</p>
<h3 id="IMPORTANTNOTEONLOCATIONCODES">IMPORTANT NOTE ON LOCATION CODES</h3>
<p>
(EW v7.0 or greater):
</p>
<p>
Here is a very important change for hyp2000 for Earthworm v7.0 and greater. With Location codes, you need to provide 5 values for the LET command! If you only provide 3 in windows, the program will crash:
</p>
<p>
Here's what hyp2000 does now with LET:
</p>
<pre class="wiki">ncss3&gt; hyp2000
 HYPOINVERSE 2000 STARTING
 9/2005 VERSION (DUAL LOCATION CODES)
 COMMAND? let
 NUMBER OF LETTERS TO CHECK IN STATION SITE CODE (2-5) [cr = 4]?
 NUMBER OF LETTERS TO CHECK IN STATION NET CODE (0-2) [cr = 0]?
 NO. OF LETTERS TO CHECK IN STATION COMPONENT CODE (0-3) [cr = 0]?
 NO. OF LETS TO CHECK IN LOCATION CODE IN PHASE FILES (0-2) [cr = 0]?
 NO. OF LETS TO CHECK IN LOCATION CODE IN OTHER FILES (0-2) [cr = 0]?
</pre><p>
So some good LET commands would be:
</p>
<pre class="wiki">LET 5 2 3 2 2    # if you're using location codes
LET 5 2 3 0 0    # if you're NOT using location codes
</pre><h2 id="ConfigurationFileCommands">Configuration File Commands</h2>
<h3 id="EXAMPLECONFIGURATIONFILE">EXAMPLE CONFIGURATION FILE</h3>
<pre class="wiki"> #
#               hypo_mgr's Configuration File
#
MyModuleId MOD_EQPROC   # module id to label outgoing messages with.
                        # Note: hypo_mgr is part of a mega-module which is
                        # ultimately started by the program eqproc.  All
                        # child processes of this mega-module need to use the
                        # same module id (thus use eqproc's module id).
RingName   HYPO_RING    # The transport ring to write output to,
LogFile    2            # 0=no log; 1=errors; 2=errors &amp; hypocenters
SourceCode W            # character to label summary cards with to
                        # identify them as coming from Earthworm
</pre><h3 id="HYPO_MGRCOMMANDLINEARGUMENTS">HYPO_MGR COMMAND LINE ARGUMENTS</h3>
<p>
An example command line to start hypo_mgr may look like this:
</p>
<pre class="wiki">	hypo_mgr hypo_mgr.d ncal.hyp
	argv[0]  argv[1]    argv[2]
</pre><pre class="wiki"> * argv[0] is the name of the executable.

 * argv[1] is the name of hypo_mgr's own configuration file which it reads on startup. 
In this file, lines may begin with a valid hypo_mgr command, described later in this 
document, or with one of 2 special characters:

#  marks the line as a comment (example: # This is a comment).

@  allows control files to be nested; one control file can be
   accessed from another with the command "@" followed by
   a string representing the path name of the next control file
   (example: @model.d).


Command names must be typed in the control file exactly as shown in this document (upper/lower case matters!).

 * argv[2] is the name of Hypoinverse's startup command file. hyp2000_mgr passes this file name to hyp2000, 
the fortran program which encapsulates the subroutine version of Hypoinverse. For a description of valid commands 
for this file, please see the following Hypoinverse documentation:

 Klein, F.W., 1989, User's guide to HYPOINVERSE, a program for VAX computers to solve for earthquake locations and 
magnitudes, U.S. Geological Survey Open-File Report 89-314, 58 pp.
</pre><h3 id="FUNCTIONALCOMMANDLISTING">FUNCTIONAL COMMAND LISTING</h3>
<p>
Below are the commands recognized by hypo_mgr, grouped by the function they influence. All of the commands are required; they must be specified in the configuration file in order for hypo_mgr to operate.
</p>
<pre class="wiki">	Earthworm system setup:
 		MyModuleId	required
		RingName	required

	Output Control:
		LogFile		required

	Miscellaneous:
		SourceCode	required
</pre><h3 id="ALPHABETICCOMMANDLISTINGDESCRIPTION">ALPHABETIC COMMAND LISTING &amp; DESCRIPTION</h3>
<p>
In the following section, all configuration file commands are listed in alphabetical order. Listed along with the command (bold-type) are its arguments (in red), the name of the subroutine that processes the command, and the function within the module that the command influences. A detailed description of the command and is also given. Default values and the values used by Calnet are listed after each command description.
</p>
<p>
The following list is organized by:
</p>
<p>
command [argument here]
</p>
<p>
<strong>LogFile [switch]</strong><br />
Processed by: hypo_mgr_config<br />
Function: output
</p>
<p>
Sets the on-off switch for writing a log file to disk. If switch is 0, no log file will be written. If switch is non-zero, hypo_mgr will write daily log file(s) called hypo_mgrxx.log_yymmdd where xx is hypo_mgr's module id (set with "MyModuleId" command) and yymmdd is the current UTC date (ex: 960123) on the system clock. The file(s) will be written in the EW_LOG directory (environment variable). The level of output written to the file is controlled by the value of switch:<br />
</p>
<blockquote>
<p>
switch = 0  no log file is written<br />
</p>
<blockquote>
<p>
1  write errors to log file<br />
2  write errors and hypocenters to log file
</p>
<pre class="wiki">Default:  none
</pre></blockquote>
</blockquote>
<p>
<strong>MyModuleId [mod_id]</strong><br />
Processed by: hypo_mgr_config<br />
Function: Earthworm setup
</p>
<p>
Sets the module id for labeling all outgoing messages. mod_id is a character string (valid strings are listed in earthworm.d) that relates (in earthworm.d) to a unique single-byte number.
</p>
<p>
NOTE: hypo_mgr is part of a mega-module which is ultimately started by the program eqproc. All sub-modules of this megamodule should be given the same module id.
</p>
<pre class="wiki">Default:  none				Calnet:  MyModuleId MOD_EQPROC
</pre><p>
<strong>RingName [ring]</strong><br />
Processed by: hypo_mgr_config<br />
Function: Earthworm setup
</p>
<p>
Tells hypo_mgr which shared memory region to use for output. ring is a character string (valid strings are listed in earthworm.d) that relates (in earthworm.d) to a unique number for the key to the shared memory region.
</p>
<pre class="wiki">Default:  none				Calnet:  RingName HYPO_RING
</pre><p>
<strong>SourceCode [label]</strong><br />
Processed by: hypo_mgr_config<br />
Function: miscellaneous
</p>
<p>
Reads in a single character label to write in column 80 of the hypo71-format summary messages output by hypo_mgr. This label identifies the source of the hypocenter as the Earthworm system. These summary messages are placed on the output shared memory region.
</p>
<pre class="wiki">Default:  none				Calnet:  SourceCode W
</pre><h2 id="HelpfulHints">Helpful Hints</h2>
</div>
        
        
      </div>
      

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="http://earthwormcentral.com/trac/ew/wiki/hyp2000_mgr?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="http://earthwormcentral.com/trac/ew/about"><strong>Trac 0.12.4</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>